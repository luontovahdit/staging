{"version":3,"sources":["components/map/src/context.js","components/map/src/MapControl.js","components/map/src/AttributionControl.js","components/map/src/MapEvented.js","components/map/src/MapComponent.js","components/map/src/MapLayer.js","components/map/src/Path.js","components/map/src/utils/updateClassName.js","components/map/src/Circle.js","components/map/src/CircleMarker.js","components/map/src/DivOverlay.js","components/map/src/FeatureGroup.js","components/map/src/GeoJSON.js","components/map/src/GridLayer.js","components/map/src/ImageOverlay.js","components/map/src/LayerGroup.js","components/map/src/LayersControl.js","components/map/src/Map.js","components/map/src/Marker.js","components/map/src/Pane.js","components/map/src/Popup.js","components/map/src/Polygon.js","components/map/src/Polyline.js","components/map/src/TileLayer.js","components/map/src/Rectangle.js","components/map/src/ScaleControl.js","components/map/src/Tooltip.js","components/map/src/WMSTileLayer.js","components/map/src/ZoomControl.js","components/map/src/EsriFeatureLayer.js","components/map/src/MapHotspots.js","constants.js","reducers/viewReducer.js","services/hotspotService.js","services/commentService.js","reducers/hotspotReducer.js","components/map/EsriGtkMap.js","components/map/MapContainer.jsx","services/loginService.js","components/MenuBar.js","reducers/mapReducer.js","components/HotspotForm.js","components/Comments.js","components/Togglable.js","components/CommentForm.js","components/Hotspot.js","components/LoginForm.js","components/RegisterForm.js","App.js","store.js","index.js"],"names":["createContext","Consumer","Provider","LeafletProvider","withLeaflet","WrappedComponent","WithLeafletComponent","props","ref","react_default","a","createElement","leaflet","Object","assign","name","displayName","concat","LeafletComponent","forwardRef","hoistNonReactStatics","MapControl","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","leafletElement","createLeafletElement","_props","Error","fromProps","toProps","position","setPosition","addTo","map","prevProps","updateLeafletElement","remove","Component","Control","Attribution","EVENTS_RE","MapEvented","_leafletEvents","extractLeafletEvents","bindLeafletEvents","_prevProps","el","forEach","cb","ev","off","keys","reduce","res","prop","test","replace","match","p","toLowerCase","next","arguments","length","undefined","prev","on","diff","objectSpread","type","data","fire","MapComponent","pane","MapLayer","_fromProps","_toProps","get","prototype","layerContainer","addLayer","attribution","attributionControl","removeAttribution","addAttribution","removeLayer","children","contextValue","react","value","OPTIONS","Path","popupContainer","setStyleIfChanged","pick","options","setStyle","nextStyle","getPathOptions","isEqual","splitClassName","center","radius","objectWithoutProperties","LeafletCircle","getOptions","setLatLng","setRadius","LeafletCircleMarker","split","filter","Boolean","addClassName","container","className","cls","DomUtil","addClass","removeClassName","removeClass","updateClassName","prevClassName","nextClassName","DivOverlay","onClose","onOpen","forceUpdate","_container","isOpen","update","onRender","_contentNode","createPortal","LeafletFeatureGroup","FeatureGroup","console","log","LeafletGeoJSON","style","GridLayer","LeafletGridLayer","opacity","zIndex","setOpacity","setZIndex","maxZoom","minZoom","LeafletImageOverlay","url","bounds","setUrl","setBounds","latLngBounds","LeafletLayerGroup","ControlledLayer","_Component","apply","inherits","createClass","key","_ref","checked","layer","removeLayerControl","BaseLayer","_this$props","addBaseLayer","bind","assertThisInitialized","Overlay","_this2","_this2$props","addOverlay","LayersControlExport","LayersControl","_this3","controlProps","Layers","collapsed","collapse","expand","_this4","setTimeout","_this5","Children","child","cloneElement","OTHER_PROPS","normalizeCenter","pos","Array","isArray","lat","lon","lng","Map","viewport","zoom","_updating","onViewportChange","getCenter","getZoom","onViewportChanged","bindContainer","LeafletMap","animate","boundsOptions","boxZoom","doubleClickZoom","dragging","keyboard","maxBounds","scrollWheelZoom","tap","touchZoom","useFlyTo","c","z","flyTo","setView","shouldUpdateCenter","setZoom","shouldUpdateBounds","setMaxBounds","flyToBounds","fitBounds","enable","disable","omit","whenReady","geocoderOptions","placeholder","errorMessage","showResultIcons","geocoder","L","Geocoder","Nominatim","geocodingQueryParams","accept-language","handleMapClick","latlng","geojsonMarkerOptions","fillColor","color","weight","fillOpacity","hotspotLayer","geoJSON","pointToLayer","feature","circleMarker","addData","hotspots","bringToFront","DomEvent","stopPropagation","handleHotspotClick","clearLayers","preferCanvas","_initEvents","_stop","equals","id","LeafletMarker","icon","setIcon","zIndexOffset","setZIndexOffset","draggable","LEAFLET_PANES","PANE_RE","paneStyles","top","right","bottom","left","Popup","state","context","getPane","createPane","removePane","uniqueId","isDefault","indexOf","isLeafletPane","getParentPane","message","warning","setState","_panes","_paneRenderers","LeafletPolygon","positions","setLatLngs","LeafletPolyline","onPopupOpen","popup","onPopupClose","_ref2","autoPan","_map","_panAnim","_adjustPan","LeafletPopup","_this$props$leaflet","popupopen","popupclose","bindPopup","openOn","defaultProps","LeafletRectangle","Scale","LeafletTileLayer","TileLayer","Tooltip","onTooltipOpen","tooltip","onTooltipClose","LeafletTooltip","tooltipopen","tooltipclose","bindTooltip","unbindTooltip","params","WMS","WMSTileLayer","prevUrl","prevParams","setParams","superOptions","Zoom","featureLayerParams","useCors","cacheLayers","simplifyFactor","esriLayer","featureLayer","properties","metadata","error","e","popupTemplate","hasOwnProperty","Util","template","EsriFeatureLayer","HotspotPopupMarker","content","src_Marker","src_Popup","HotspotMarkersList","items","markers","_ref3","MapHotspots_HotspotPopupMarker","views","dateFormat","year","month","day","hour","minute","initialState","newCoordinates","newLng","newLat","hotspot","showing","previousView","isUserLoggedIn","setUserLoggedIn","loggedIn","dispatch","viewReducer","action","baseUrl","hotspotService","getAll","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","axios","sent","abrupt","stop","getHotspotsByCoordinates","_callee2","_context2","_x","_x2","getHotspot","_callee3","_context3","_x3","create","_ref4","_callee4","_context4","post","withCredentials","_x4","commentService","comment","currentHotspot","newHotspot","hotspotReducer","find","hs","inHotspot","comments","EsriGtkMap","coordinates","showHotspotForm","setCurrentHotspot","showHotspot","Map_Map","src_LayersControl","src_TileLayer","src_EsriFeatureLayer","mapDispatchToProps","connect","view","MapContainer","map_EsriGtkMap","loginService","login","credentials","logout","register","userInfo","MenuBar","Menu","attached","tabular","Container","Item","Dropdown","item","direction","onClick","Icon","paddingLeft","showLoginForm","React","withRouter","selectedGTKLayers","selectedBasemapLayer","geometry","mapReducer","basemapLayer","GTKLayer","slice","selectedGTKFeature","GTKFeature","HotspotForm","close","hideHotspotForm","addHotspot","event","hotspotObject","preventDefault","target","title","description","location","addHotspotToMap","open","Modal","closeOnDimmerClick","closeIcon","Header","Content","Form","onSubmit","Input","TextArea","minHeight","Button","t0","Comments","Segment","Date","createdAt","toLocaleDateString","addedBy","Divider","hidden","as","labelPosition","compact","basic","Label","pointing","upVotes","downVotes","Togglable","toggleVisibility","visible","hideWhenVisible","display","showWhenVisible","buttonLabel","CommentForm","addComment","commentObject","hotspotId","newComment","Hotspot","hideHotspot","components_Togglable","components_CommentForm","components_Comments","LoginForm","history","push","hideLoginForm","username","password","showRegisterForm","RegisterForm","hideRegisterForm","userObject","usernameError","passwordError","displaynameError","emailError","passwordConf","displayname","email","handleChange","defineProperty","onChange","require","App","initialiseHotspots","setHotspotsOnMap","components_MenuBar","map_MapContainer","components_HotspotForm","components_Hotspot","components_LoginForm","components_RegisterForm","hotspotFeatures","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","render","ReactDOM","es","BrowserRouter","src_App","document","getElementById","subscribe"],"mappings":"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","file":"static/js/main.c30b2829.chunk.js","sourcesContent":["// @flow\n\nimport hoistNonReactStatics from 'hoist-non-react-statics'\nimport React, {\n  createContext,\n  // $FlowFixMe: import\n  forwardRef,\n  type ComponentType,\n} from 'react'\n\nimport type { LeafletContext } from './types'\n\nconst { Consumer, Provider } = createContext<LeafletContext>({})\n\nexport const LeafletConsumer = Consumer\nexport const LeafletProvider = Provider\n\nexport const withLeaflet = <Props: Object>(\n  WrappedComponent: ComponentType<Props>,\n): ComponentType<$Diff<Props, { leaflet: LeafletContext }>> => {\n  const WithLeafletComponent = (props, ref) => (\n    <Consumer>\n      {(leaflet: LeafletContext) => (\n        <WrappedComponent {...props} leaflet={leaflet} ref={ref} />\n      )}\n    </Consumer>\n  )\n\n  // flowlint-next-line sketchy-null-string:off\n  const name = WrappedComponent.displayName || WrappedComponent.name\n  WithLeafletComponent.displayName = `Leaflet(${name})`\n\n  const LeafletComponent = forwardRef(WithLeafletComponent)\n  hoistNonReactStatics(LeafletComponent, WrappedComponent)\n\n  return LeafletComponent\n}\n","// @flow\n\nimport { Control } from 'leaflet'\nimport { Component } from 'react'\n\nimport type { MapControlProps } from './types'\n\nexport default class MapControl<\n  LeafletElement: Control,\n  Props: MapControlProps,\n> extends Component<Props> {\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(this.props)\n  }\n\n  createLeafletElement(_props: Props): LeafletElement {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props): void {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setPosition(toProps.position)\n    }\n  }\n\n  componentDidMount() {\n    this.leafletElement.addTo(this.props.leaflet.map)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    this.leafletElement.remove()\n  }\n\n  render(): * {\n    return null\n  }\n}\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Attribution\ntype Props = {\n  prefix?: string,\n} & MapControlProps\n\nclass AttributionControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Attribution(props)\n  }\n}\n\nexport default withLeaflet(AttributionControl)\n","// @flow\n\nimport type { Evented } from 'leaflet'\nimport { forEach } from 'lodash'\nimport { Component } from 'react'\n\nexport const EVENTS_RE = /^on(.+)$/i\n\ntype EventHandler = (event: Event) => void\ntype EventsObject = { [key: string]: EventHandler }\n\nexport default class MapEvented<\n  LeafletElement: Evented,\n  Props: Object,\n> extends Component<Props> {\n  _leafletEvents: EventsObject\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this._leafletEvents = this.extractLeafletEvents(props)\n  }\n\n  componentDidMount() {\n    this.bindLeafletEvents(this._leafletEvents)\n  }\n\n  componentDidUpdate(_prevProps: Props) {\n    this._leafletEvents = this.bindLeafletEvents(\n      this.extractLeafletEvents(this.props),\n      this._leafletEvents,\n    )\n  }\n\n  componentWillUnmount() {\n    const el = this.leafletElement\n    if (!el) return\n\n    forEach(this._leafletEvents, (cb, ev) => {\n      el.off(ev, cb)\n    })\n  }\n\n  extractLeafletEvents(props: Props): EventsObject {\n    return Object.keys(props).reduce((res, prop) => {\n      if (EVENTS_RE.test(prop)) {\n        if (props[prop] != null) {\n          const key = prop.replace(EVENTS_RE, (match, p) => p.toLowerCase())\n          res[key] = props[prop]\n        }\n      }\n      return res\n    }, {})\n  }\n\n  bindLeafletEvents(\n    next: EventsObject = {},\n    prev: EventsObject = {},\n  ): EventsObject {\n    const el = this.leafletElement\n    if (el == null || el.on == null) return {}\n\n    const diff = { ...prev }\n    forEach(prev, (cb, ev) => {\n      if (next[ev] == null || cb !== next[ev]) {\n        delete diff[ev]\n        el.off(ev, cb)\n      }\n    })\n\n    forEach(next, (cb, ev) => {\n      if (prev[ev] == null || cb !== prev[ev]) {\n        diff[ev] = cb\n        el.on(ev, cb)\n      }\n    })\n\n    return diff\n  }\n\n  fireLeafletEvent(type: string, data: ?any) {\n    const el = this.leafletElement\n    if (el) el.fire(type, data)\n  }\n}\n","// @flow\n\nimport MapEvented from './MapEvented'\nimport type { MapComponentProps } from './types'\n\nexport default class MapComponent<\n  LeafletElement,\n  Props: MapComponentProps,\n> extends MapEvented<LeafletElement, Props> {\n  getOptions(props: Props): Props {\n    if (props.pane != null) {\n      return props\n    }\n    if (props.leaflet != null && props.leaflet.pane != null) {\n      return { ...props, pane: props.leaflet.pane }\n    }\n    return props\n  }\n}\n","// @flow\n\nimport type { Layer } from 'leaflet'\nimport React, { Fragment } from 'react'\n\nimport { LeafletProvider } from './context'\nimport MapComponent from './MapComponent'\nimport type { LeafletContext, MapLayerProps } from './types'\nimport { connect } from 'react-redux'\n\n//MapLayer wraps the leaflet Layer, which is parent to EsriFeatureLayer / L.esri.FeatureLayer\nclass MapLayer<\n  LeafletElement: Layer,\n  Props: MapLayerProps,\n> extends MapComponent<LeafletElement, Props> {\n  contextValue: ?LeafletContext\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n  }\n\n  get layerContainer(): Layer {\n    return this.props.leaflet.layerContainer || this.props.leaflet.map\n  }\n\n  createLeafletElement(_props: Props): LeafletElement {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(_fromProps: Props, _toProps: Props) {}\n\n  componentDidMount() {\n    //why call parents mount?\n    super.componentDidMount()\n    //this.leafletElement holds the GTK featureLayer with set options\n    this.layerContainer.addLayer(this.leafletElement)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    super.componentDidUpdate(prevProps)\n\n    if (this.props.attribution !== prevProps.attribution) {\n      const { map } = this.props.leaflet\n      if (map != null && map.attributionControl != null) {\n        map.attributionControl.removeAttribution(prevProps.attribution)\n        map.attributionControl.addAttribution(this.props.attribution)\n      }\n    }\n\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount()\n    this.layerContainer.removeLayer(this.leafletElement)\n  }\n  //Runs on loading app/map. interaction not necessary\n  render() {\n    const { children } = this.props\n    if (children == null) {\n      return null\n    }\n    return this.contextValue == null ? (\n      <Fragment>{children}</Fragment>\n    ) : (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    )\n  }\n}\nexport default MapLayer;\n","// @flow\n\nimport type { Path as PathType } from 'leaflet'\nimport { isEqual, pick } from 'lodash'\n\nimport MapLayer from './MapLayer'\nimport type { PathOptions, PathProps } from './types'\n\nconst OPTIONS = [\n  'stroke',\n  'color',\n  'weight',\n  'opacity',\n  'lineCap',\n  'lineJoin',\n  'dashArray',\n  'dashOffset',\n  'fill',\n  'fillColor',\n  'fillOpacity',\n  'fillRule',\n  'bubblingMouseEvents',\n  'renderer',\n  'className',\n  // Interactive Layer\n  'interactive',\n  // Layer\n  'pane',\n  'attribution',\n]\n\nexport default class Path<\n  LeafletElement: PathType,\n  Props: PathProps,\n> extends MapLayer<LeafletElement, Props> {\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n    if (this.contextValue == null) {\n      this.contextValue = {\n        ...props.leaflet,\n        popupContainer: this.leafletElement,\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    super.componentDidUpdate(prevProps)\n    this.setStyleIfChanged(prevProps, this.props)\n  }\n\n  getPathOptions(props: Props): PathOptions {\n    return pick(props, OPTIONS)\n  }\n\n  setStyle(options: PathOptions = {}) {\n    this.leafletElement.setStyle(options)\n  }\n\n  setStyleIfChanged(fromProps: Props, toProps: Props) {\n    const nextStyle = this.getPathOptions(toProps)\n    if (!isEqual(nextStyle, this.getPathOptions(fromProps))) {\n      this.setStyle(nextStyle)\n    }\n  }\n}\n","// @flow\n\nimport { DomUtil } from 'leaflet'\n\nconst splitClassName = (className: string = ''): Array<string> => {\n  return className.split(' ').filter(Boolean)\n}\n\nexport const addClassName = (container: HTMLElement, className: string) => {\n  splitClassName(className).forEach(cls => {\n    DomUtil.addClass(container, cls)\n  })\n}\n\nexport const removeClassName = (container: HTMLElement, className: string) => {\n  splitClassName(className).forEach(cls => {\n    DomUtil.removeClass(container, cls)\n  })\n}\n\nexport default (\n  container: ?HTMLElement,\n  prevClassName: ?string,\n  nextClassName: ?string,\n) => {\n  if (container != null && nextClassName !== prevClassName) {\n    if (prevClassName != null && prevClassName.length > 0) {\n      removeClassName(container, prevClassName)\n    }\n    if (nextClassName != null && nextClassName.length > 0) {\n      addClassName(container, nextClassName)\n    }\n  }\n}\n","// @flow\n\nimport { Circle as LeafletCircle } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, MapLayerProps, PathOptions } from './types'\n\ntype LeafletElement = LeafletCircle\ntype Props = {\n  center: LatLng,\n  radius: number,\n} & MapLayerProps &\n  PathOptions &\n  Object\n\nclass Circle extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const { center, radius, ...options } = props\n    return new LeafletCircle(center, radius, this.getOptions(options))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.center !== fromProps.center) {\n      this.leafletElement.setLatLng(toProps.center)\n    }\n    if (toProps.radius !== fromProps.radius) {\n      this.leafletElement.setRadius(toProps.radius)\n    }\n  }\n}\n\nexport default withLeaflet(Circle)\n","// @flow\n\nimport { CircleMarker as LeafletCircleMarker } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletCircleMarker\ntype Props = {\n  center: LatLng,\n  radius: number,\n} & PathProps\n\nclass CircleMarker extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletCircleMarker(props.center, this.getOptions(props))\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.center !== fromProps.center) {\n      this.leafletElement.setLatLng(toProps.center)\n    }\n    if (toProps.radius !== fromProps.radius) {\n      this.leafletElement.setRadius(toProps.radius)\n    }\n  }\n}\n\nexport default withLeaflet(CircleMarker)\n","// @flow\n\nimport { createPortal } from 'react-dom'\n\nimport MapComponent from './MapComponent'\nimport updateClassName from './utils/updateClassName'\nimport type { DivOverlayProps } from './types'\n\ntype DivOverlayTypes = {\n  _container: HTMLDivElement,\n  _contentNode: HTMLDivElement,\n  isOpen: () => boolean,\n  update: () => void,\n}\n\nexport default class DivOverlay<\n  LeafletElement,\n  Props: DivOverlayProps,\n> extends MapComponent<LeafletElement & DivOverlayTypes, Props> {\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n  }\n\n  createLeafletElement(_props: Props) {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(_prevProps: Props, _props: Props) {}\n\n  componentDidUpdate(prevProps: Props) {\n    updateClassName(\n      this.leafletElement._container,\n      prevProps.className,\n      this.props.className,\n    )\n\n    this.updateLeafletElement(prevProps, this.props)\n\n    if (this.leafletElement.isOpen()) {\n      this.leafletElement.update()\n      this.onRender()\n    }\n  }\n\n  onClose = () => {\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  onOpen = () => {\n    this.forceUpdate() // Re-render now that leafletElement is created\n    if (this.props.onOpen) {\n      this.props.onOpen()\n    }\n  }\n\n  onRender() {}\n\n  render() {\n    if (this.leafletElement._contentNode) {\n      return createPortal(this.props.children, this.leafletElement._contentNode)\n    }\n    return null\n  }\n}\n","// @flow\n\nimport { FeatureGroup as LeafletFeatureGroup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { PathProps } from './types'\n\ntype LeafletElement = LeafletFeatureGroup\ntype Props = PathProps\n\nclass FeatureGroup extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletFeatureGroup(this.getOptions(props))\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: el,\n      popupContainer: el,\n    }\n    return el\n  }\n\n  componentDidMount() {\n    super.componentDidMount()\n    this.setStyle(this.props)\n  }\n}\n\nexport default withLeaflet(FeatureGroup)\n","// @flow\n\nimport { GeoJSON as LeafletGeoJSON, type LatLng, type Layer } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { PathProps } from './types'\nconsole.log('GeoJSON class component')\ntype LeafletElement = LeafletGeoJSON\n\ntype GeoJSONdata = Object | Array<any>\n\ntype Props = {\n  data: GeoJSONdata,\n  pointToLayer?: (point: GeoJSONdata, latlng: LatLng) => Layer,\n  style?: (feature: GeoJSONdata) => Object,\n  onEachFeature?: (feature: GeoJSONdata, layer: Layer) => void,\n  filter?: (feature: GeoJSONdata) => boolean,\n  coordsToLatLng?: (coords: GeoJSONdata) => LatLng,\n} & PathProps\n\nclass GeoJSON extends Path<LeafletElement, Props> {\n\n  createLeafletElement(props: Props): LeafletElement {\n    //näitä ei näköjään ajeta! miksei?!\n    console.log('GeoJSON createLeafletElement, props.data', props.data)\n    console.log('GeoJSON createLeafletElement, this.getOptions(props)', this.getOptions(props))\n    return new LeafletGeoJSON(props.data, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    console.log('GeoJSON updateLeafletElement fromProps', fromProps)\n    console.log('GeoJSON updateLeafletElement toProps', toProps)\n    if (typeof toProps.style === 'function') {\n      this.setStyle(toProps.style)\n    } else {\n      this.setStyleIfChanged(fromProps, toProps)\n    }\n  }\n}\n\nexport default withLeaflet(GeoJSON)\n","// @flow\n\nimport { GridLayer as LeafletGridLayer } from 'leaflet'\n\nimport MapLayer from './MapLayer'\nimport type { GridLayerProps } from './types'\n\nexport default class GridLayer<\n  LeafletElement: LeafletGridLayer,\n  Props: GridLayerProps,\n> extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletGridLayer(this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    const { opacity, zIndex } = toProps\n    if (opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(opacity)\n    }\n    if (zIndex !== fromProps.zIndex) {\n      this.leafletElement.setZIndex(zIndex)\n    }\n  }\n\n  getOptions(props: Props): Props {\n    const options = super.getOptions(props)\n    return props.leaflet.map == null\n      ? options\n      : // $FlowFixMe: object spread type\n        {\n          maxZoom: props.leaflet.map.options.maxZoom,\n          minZoom: props.leaflet.map.options.minZoom,\n          ...options,\n        }\n  }\n\n  render() {\n    return null\n  }\n}\n","// @flow\n\nimport { ImageOverlay as LeafletImageOverlay, latLngBounds } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { LatLngBounds, MapLayerProps } from './types'\n\ntype LeafletElement = LeafletImageOverlay\ntype Props = {\n  attribution?: string,\n  bounds?: LatLngBounds,\n  opacity?: number,\n  url: string | HTMLImageElement,\n  zIndex?: number,\n} & MapLayerProps\n\nclass ImageOverlay extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletImageOverlay(\n      props.url,\n      props.bounds,\n      this.getOptions(props),\n    )\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.url !== fromProps.url) {\n      this.leafletElement.setUrl(toProps.url)\n    }\n    if (toProps.bounds !== fromProps.bounds) {\n      this.leafletElement.setBounds(latLngBounds(toProps.bounds))\n    }\n    if (toProps.opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(toProps.opacity)\n    }\n    if (toProps.zIndex !== fromProps.zIndex) {\n      this.leafletElement.setZIndex(toProps.zIndex)\n    }\n  }\n}\n\nexport default withLeaflet(ImageOverlay)\n","// @flow\n\nimport { LayerGroup as LeafletLayerGroup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { MapLayerProps } from './types'\n\nclass LayerGroup<\n  LeafletElement: LeafletLayerGroup,\n  Props: MapLayerProps,\n> extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletLayerGroup(this.getOptions(props))\n    this.contextValue = { ...props.leaflet, layerContainer: el }\n    return el\n  }\n}\n\nexport default withLeaflet(LayerGroup)\n","// @flow\n\nimport { Control, type Layer } from 'leaflet'\nimport React, {\n  cloneElement,\n  Component,\n  Children,\n  Fragment,\n  type ChildrenArray,\n  type Element,\n} from 'react'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type {\n  AddLayerHandler,\n  RemoveLayerHandler,\n  LeafletContext,\n  MapControlProps,\n} from './types'\n\ntype ControlledLayerProps = {\n  addBaseLayer: AddLayerHandler,\n  addOverlay: AddLayerHandler,\n  checked?: boolean,\n  children: Element<*>,\n  leaflet: LeafletContext,\n  name: string,\n  removeLayer: RemoveLayerHandler,\n  removeLayerControl: RemoveLayerHandler,\n}\n\n// Abtract class for layer container, extended by BaseLayer and Overlay\nexport class ControlledLayer extends Component<ControlledLayerProps> {\n  contextValue: LeafletContext\n  layer: ?Layer\n\n  componentDidUpdate({ checked }: ControlledLayerProps) {\n    if (this.props.leaflet.map == null) {\n      return\n    }\n    // Handle dynamically (un)checking the layer => adding/removing from the map\n    if (this.props.checked === true && (checked == null || checked === false)) {\n      this.props.leaflet.map.addLayer(this.layer)\n    } else if (\n      checked === true &&\n      (this.props.checked == null || this.props.checked === false)\n    ) {\n      this.props.leaflet.map.removeLayer(this.layer)\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeLayerControl(this.layer)\n  }\n\n  addLayer() {\n    throw new Error('Must be implemented in extending class')\n  }\n\n  removeLayer(layer: Layer) {\n    //TODO tähän voisi myös tehdä hideLayer, jolloin voitaisiin ehkä välttyä turhilta API-kutsuilta\n    this.props.removeLayer(layer)\n  }\n\n  render() {\n    const { children } = this.props\n    return children ? (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    ) : null\n  }\n}\n\nclass BaseLayer extends ControlledLayer {\n  constructor(props: ControlledLayerProps) {\n    super(props)\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: {\n        addLayer: this.addLayer.bind(this),\n        removeLayer: this.removeLayer.bind(this),\n      },\n    }\n  }\n\n  addLayer = (layer: Layer) => {\n    this.layer = layer // Keep layer reference to handle dynamic changes of props\n    const { addBaseLayer, checked, name } = this.props\n    addBaseLayer(layer, name, checked)\n  }\n}\n\nclass Overlay extends ControlledLayer {\n  constructor(props: ControlledLayerProps) {\n    super(props)\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: {\n        addLayer: this.addLayer.bind(this),\n        removeLayer: this.removeLayer.bind(this),\n      },\n    }\n  }\n\n  addLayer = (layer: Layer) => {\n    this.layer = layer // Keep layer reference to handle dynamic changes of props\n    const { addOverlay, checked, name } = this.props\n    addOverlay(layer, name, checked)\n  }\n}\n\ntype LeafletElement = Control.Layers\ntype LayersControlProps = {\n  children: ChildrenArray<*>,\n  collapsed?: boolean,\n} & MapControlProps\n\nclass LayersControl extends MapControl<LeafletElement, LayersControlProps> {\n  controlProps: {\n    addBaseLayer: AddLayerHandler,\n    addOverlay: AddLayerHandler,\n    removeLayer: RemoveLayerHandler,\n    removeLayerControl: RemoveLayerHandler,\n  }\n\n  constructor(props: LayersControlProps) {\n    super(props)\n    this.controlProps = {\n      addBaseLayer: this.addBaseLayer.bind(this),\n      addOverlay: this.addOverlay.bind(this),\n      leaflet: props.leaflet,\n      removeLayer: this.removeLayer.bind(this),\n      removeLayerControl: this.removeLayerControl.bind(this),\n    }\n  }\n\n  createLeafletElement(props: LayersControlProps): LeafletElement {\n    const { children: _children, ...options } = props\n    return new Control.Layers(undefined, undefined, options)\n  }\n\n  updateLeafletElement(\n    fromProps: LayersControlProps,\n    toProps: LayersControlProps,\n  ) {\n    super.updateLeafletElement(fromProps, toProps)\n    if (toProps.collapsed !== fromProps.collapsed) {\n      if (toProps.collapsed === true) {\n        this.leafletElement.collapse()\n      } else {\n        this.leafletElement.expand()\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    setTimeout(() => {\n      super.componentWillUnmount()\n    }, 0)\n  }\n\n  addBaseLayer(layer: Layer, name: string, checked: boolean = false) {\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer)\n    }\n    this.leafletElement.addBaseLayer(layer, name)\n  }\n\n  addOverlay(layer: Layer, name: string, checked: boolean = false) {\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer)\n    }\n    this.leafletElement.addOverlay(layer, name)\n  }\n\n  removeLayer(layer: Layer) {\n    if (this.props.leaflet.map != null) {\n      this.props.leaflet.map.removeLayer(layer)\n    }\n  }\n\n  removeLayerControl(layer: Layer) {\n    this.leafletElement.removeLayer(layer)\n  }\n\n  render() {\n    const children = Children.map(this.props.children, child => {\n      return child ? cloneElement(child, this.controlProps) : null\n    })\n    return <Fragment>{children}</Fragment>\n  }\n}\n\nconst LayersControlExport: Object = withLeaflet(LayersControl)\n\nLayersControlExport.BaseLayer = BaseLayer\nLayersControlExport.Overlay = Overlay\n\nexport default LayersControlExport\n","// @flow\n\nimport {\n  latLngBounds,\n  Map as LeafletMap,\n  type CRS,\n  type Renderer,\n} from 'leaflet'\nimport { geoJSON, circleMarker, DomEvent, polygon } from 'leaflet'\nimport { L } from 'leaflet-control-geocoder'\nimport { omit } from 'lodash'\nimport React, { type Node } from 'react'\n\nimport { LeafletProvider } from './context'\nimport MapEvented from './MapEvented'\nimport updateClassName from './utils/updateClassName'\nimport type\n {\n  LatLng,\n  LatLngBounds,\n  LeafletContext,\n  Point,\n  Viewport,\n} from './types'\n\nconst OTHER_PROPS = [\n  'children',\n  'className',\n  'id',\n  'style',\n  'useFlyTo',\n  'whenReady'\n]\n\nconst normalizeCenter = (pos: LatLng): [number, number] => {\n  return Array.isArray(pos)\n    ? [pos[0], pos[1]]\n    : [pos.lat, pos.lon ? pos.lon : pos.lng]\n}\n\ntype LeafletElement = LeafletMap\n\ntype ZoomOption = boolean | 'center'\ntype Props = {\n  [key: string]: any,\n  // Leaflet options\n  preferCanvas?: boolean,\n  attributionControl?: boolean,\n  zoomControl?: boolean,\n  closePopupOnClick?: boolean,\n  zoomSnap?: number,\n  zoomDelta?: number,\n  trackResize?: boolean,\n  boxZoom?: boolean,\n  doubleClickZoom?: ZoomOption,\n  dragging?: boolean,\n  crs?: CRS,\n  center?: LatLng,\n  zoom?: number,\n  minZoom?: number,\n  maxZoom?: number,\n  maxBounds?: LatLngBounds,\n  renderer?: Renderer,\n  zoomAnimation?: boolean,\n  zoomAnimationThreshold?: number,\n  fadeAnimation?: boolean,\n  markerZoomAnimation?: boolean,\n  transform3DLimit?: number,\n  inertia?: boolean,\n  inertiaDeceleration?: number,\n  inertiaMaxSpeed?: number,\n  easeLinearity?: number,\n  worldCopyJump?: boolean,\n  maxBoundsViscosity?: number,\n  keyboard?: boolean,\n  keyboardPanDelta?: number,\n  scrollWheelZoom?: ZoomOption,\n  wheelDebounceTime?: number,\n  wheelPxPerZoomLevel?: number,\n  tap?: boolean,\n  tapTolerance?: number,\n  touchZoom?: ZoomOption,\n  bounceAtZoomLimits?: boolean,\n  // Additional options\n  animate?: boolean,\n  bounds?: LatLngBounds,\n  boundsOptions?: {\n    paddingTopLeft?: Point,\n    paddingBottomRight?: Point,\n    padding?: Point,\n    maxZoom?: number,\n  },\n  children: Node,\n  className?: string,\n  id?: string,\n  style?: Object,\n  useFlyTo?: boolean,\n  viewport?: Viewport,\n  whenReady?: () => void,\n}\n\nexport default class Map extends MapEvented<LeafletElement, Props> {\n  className: ?string\n  contextValue: ?LeafletContext\n  container: ?HTMLDivElement\n  viewport: Viewport = {\n    center: undefined,\n    zoom: undefined,\n  }\n\n  _updating: boolean = false\n\n  constructor(props: Props) {\n    super(props)\n    console.log('props:', props)\n    this.className = props.className\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    const { viewport, ...options } = props\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center\n      }\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom\n      }\n    }\n    return new LeafletMap(this.container, options)\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    this._updating = true\n\n    const {\n      animate,\n      bounds,\n      boundsOptions,\n      boxZoom,\n      center,\n      className,\n      doubleClickZoom,\n      dragging,\n      keyboard,\n      maxBounds,\n      scrollWheelZoom,\n      tap,\n      touchZoom,\n      useFlyTo,\n      viewport,\n      zoom,\n    } = toProps\n\n    updateClassName(this.container, fromProps.className, className)\n\n    if (viewport && viewport !== fromProps.viewport) {\n      const c = viewport.center ? viewport.center : center\n      const z = viewport.zoom == null ? zoom : viewport.zoom\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, { animate })\n      } else {\n        this.leafletElement.setView(c, z, { animate })\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, { animate })\n      } else {\n        this.leafletElement.setView(center, zoom, { animate })\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom)\n      } else {\n        this.leafletElement.setZoom(zoom)\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds)\n    }\n\n    if (\n      bounds &&\n      (this.shouldUpdateBounds(bounds, fromProps.bounds) ||\n        boundsOptions !== fromProps.boundsOptions)\n    ) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, boundsOptions)\n      } else {\n        this.leafletElement.fitBounds(bounds, boundsOptions)\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable()\n      } else {\n        this.leafletElement.boxZoom.disable()\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true) {\n        this.leafletElement.doubleClickZoom.enable()\n      } else {\n        this.leafletElement.doubleClickZoom.disable()\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable()\n      } else {\n        this.leafletElement.dragging.disable()\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable()\n      } else {\n        this.leafletElement.keyboard.disable()\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom\n        this.leafletElement.scrollWheelZoom.enable()\n      } else {\n        this.leafletElement.scrollWheelZoom.disable()\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable()\n      } else {\n        this.leafletElement.tap.disable()\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom\n        this.leafletElement.touchZoom.enable()\n      } else {\n        this.leafletElement.touchZoom.disable()\n      }\n    }\n\n    this._updating = false\n  }\n\n  onViewportChange = () => {\n    const center = this.leafletElement.getCenter()\n    this.viewport = {\n      center: center ? [center.lat, center.lng] : undefined,\n      zoom: this.leafletElement.getZoom(),\n    }\n    if (this.props.onViewportChange && !this._updating) {\n      this.props.onViewportChange(this.viewport)\n    }\n  }\n\n  onViewportChanged = () => {\n    if (this.props.onViewportChanged && !this._updating) {\n      this.props.onViewportChanged(this.viewport)\n    }\n  }\n\n  componentDidMount() {\n    const props = omit(this.props, OTHER_PROPS)\n    this.leafletElement = this.createLeafletElement(props)\n\n    this.leafletElement.on('move', this.onViewportChange)\n    this.leafletElement.on('moveend', this.onViewportChanged)\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, props.boundsOptions)\n    }\n\n    if (this.props.whenReady) {\n      this.leafletElement.whenReady(this.props.whenReady)\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement,\n    }\n\n    const geocoderOptions = {\n      placeholder: 'Etsi...',\n      errorMessage: 'Ei kohteita.',\n      showResultIcons: true,\n      //defaultMarkGeocode: false,\n      position: 'topleft',\n      geocoder: new L.Control.Geocoder.Nominatim({\n        geocodingQueryParams: {\n          'accept-language': 'fi'\n        }\n      })\n    }\n    new L.Control.Geocoder(geocoderOptions)\n      .addTo(this.contextValue.map)\n\n    this.contextValue.map.on('click', function(ev) {\n      props.handleMapClick([ ev.latlng.lng, ev.latlng.lat ])\n      console.log('props2', props)\n      //alert(ev.latlng); // ev is an event object (MouseEvent in this case)\n    })\n\n    var geojsonMarkerOptions = {\n      radius: 8,\n      fillColor: 'darkorange',\n      color: 'black',\n      weight: 1,\n      opacity: 1,\n      fillOpacity: 0.8\n    }\n\n    this.hotspotLayer = geoJSON([], {\n      pointToLayer: function (feature, latlng) {\n        return circleMarker(latlng, geojsonMarkerOptions)\n      }}).addTo(this.contextValue.map)\n\n    this.hotspotLayer.addData(props.hotspots)\n    this.hotspotLayer.bringToFront()\n\n    this.hotspotLayer.on('click', function(ev) {\n      DomEvent.stopPropagation(ev)\n      props.handleHotspotClick(ev)\n    })\n\n    super.componentDidMount()\n    this.forceUpdate() // Re-render now that leafletElement is created\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    console.log('updated?: ',this.props.hotspots)\n    this.hotspotLayer.clearLayers()\n    this.hotspotLayer.addData(this.props.hotspots)\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount()\n\n    this.leafletElement.off('move', this.onViewportChange)\n    this.leafletElement.off('moveend', this.onViewportChanged)\n\n    // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true)\n      this.leafletElement._stop()\n    } else {\n      this.leafletElement.remove()\n    }\n  }\n\n  bindContainer = (container: ?HTMLDivElement): void => {\n    this.container = container\n  }\n\n  shouldUpdateCenter(next: LatLng, prev: LatLng) {\n    if (!prev) return true\n    next = normalizeCenter(next)\n    prev = normalizeCenter(prev)\n    return next[0] !== prev[0] || next[1] !== prev[1]\n  }\n\n  shouldUpdateBounds(next: LatLngBounds, prev: LatLngBounds) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true\n  }\n\n  render() {\n    return (\n      <div\n        className={this.className}\n        id={this.props.id}\n        ref={this.bindContainer}\n        style={this.props.style}>\n        {this.contextValue ? (\n          <LeafletProvider value={this.contextValue}>\n            {this.props.children}\n          </LeafletProvider>\n        ) : null}\n      </div>\n    )\n  }\n}","// @flow\n\nimport { type Icon, Marker as LeafletMarker } from 'leaflet'\nimport React from 'react'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { LatLng, MapLayerProps } from './types'\n\ntype LeafletElement = LeafletMarker\ntype Props = {\n  icon?: Icon,\n  draggable?: boolean,\n  opacity?: number,\n  position: LatLng,\n  zIndexOffset?: number,\n} & MapLayerProps\n\nclass Marker extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletMarker(props.position, this.getOptions(props))\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setLatLng(toProps.position)\n    }\n    if (toProps.icon !== fromProps.icon) {\n      this.leafletElement.setIcon(toProps.icon)\n    }\n    if (toProps.zIndexOffset !== fromProps.zIndexOffset) {\n      this.leafletElement.setZIndexOffset(toProps.zIndexOffset)\n    }\n    if (toProps.opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(toProps.opacity)\n    }\n    if (toProps.draggable !== fromProps.draggable) {\n      if (toProps.draggable === true) {\n        this.leafletElement.dragging.enable()\n      } else {\n        this.leafletElement.dragging.disable()\n      }\n    }\n  }\n\n  render() {\n    const { children } = this.props\n    return children == null || this.contextValue == null ? null : (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    )\n  }\n}\n\nexport default withLeaflet(Marker)\n","// @flow\n// flowlint sketchy-null-string:off\n\nimport { forEach, omit, uniqueId } from 'lodash'\nimport React, { Component, type Node } from 'react'\nimport warning from 'warning'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport type { LeafletContext } from './types'\nimport { addClassName, removeClassName } from './utils/updateClassName'\n\nconst LEAFLET_PANES = [\n  'tile',\n  'shadow',\n  'overlay',\n  'map',\n  'marker',\n  'tooltip',\n  'popup',\n]\n\nconst PANE_RE = /-*pane/gi\n\nconst isLeafletPane = (name: string): boolean => {\n  return LEAFLET_PANES.indexOf(name.replace(PANE_RE, '')) !== -1\n}\n\nconst paneStyles = {\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n}\n\ntype Props = {\n  children: Node,\n  className?: string,\n  leaflet: LeafletContext,\n  name?: string,\n  pane?: string,\n  style?: Object,\n}\n\ntype State = {\n  name: ?string,\n  context: ?LeafletContext,\n}\n\nclass Pane extends Component<Props, State> {\n  state = {\n    name: undefined,\n    context: undefined,\n  }\n\n  componentDidMount() {\n    this.createPane(this.props)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!this.state.name) {\n      // Do nothing if this.state.name is undefined due to errors or\n      // an invalid props.name value\n      return\n    }\n\n    // If the 'name' prop has changed the current pane is unmounted and a new\n    // pane is created.\n    if (this.props.name !== prevProps.name) {\n      this.removePane()\n      this.createPane(this.props)\n    } else {\n      // Remove the previous css class name from the pane if it has changed.\n      // setStyle() will take care of adding in the updated className\n      if (prevProps.className && this.props.className !== prevProps.className) {\n        const pane = this.getPane(this.state.name)\n        if (pane != null && prevProps.className != null) {\n          removeClassName(pane, prevProps.className)\n        }\n      }\n\n      // Update the pane's DOM node style and class\n      this.setStyle(this.props)\n    }\n  }\n\n  componentWillUnmount() {\n    this.removePane()\n  }\n\n  createPane(props: Props) {\n    const { map } = props.leaflet\n    const name = props.name || `pane-${uniqueId()}`\n\n    if (map != null && map.createPane != null) {\n      const isDefault = isLeafletPane(name)\n      const existing = isDefault || this.getPane(name)\n\n      if (existing == null) {\n        map.createPane(name, this.getParentPane())\n      } else {\n        const message = isDefault\n          ? `You must use a unique name for a pane that is not a default leaflet pane (${name})`\n          : `A pane with this name already exists. (${name})`\n        warning(false, message)\n      }\n\n      this.setState(\n        { name, context: { ...props.leaflet, pane: name } },\n        this.setStyle,\n      )\n    }\n  }\n\n  removePane() {\n    // Remove the created pane\n    const { name } = this.state\n    if (name != null) {\n      const pane = this.getPane(name)\n      if (pane != null && pane.remove) pane.remove()\n\n      const { map } = this.props.leaflet\n      if (map != null && map._panes != null) {\n        map._panes = omit(map._panes, name)\n        map._paneRenderers = omit(map._paneRenderers, name)\n      }\n    }\n  }\n\n  setStyle = ({ style, className }: Props = this.props) => {\n    const pane = this.getPane(this.state.name)\n    if (pane) {\n      if (className) {\n        addClassName(pane, className)\n      }\n      if (style) {\n        forEach(style, (value, key) => {\n          pane.style[key] = value\n        })\n      }\n    }\n  }\n\n  getParentPane(): ?HTMLElement {\n    return this.getPane(this.props.pane || this.props.leaflet.pane)\n  }\n\n  getPane(name: ?string): ?HTMLElement {\n    if (name != null && this.props.leaflet.map != null) {\n      return this.props.leaflet.map.getPane(name)\n    }\n  }\n\n  render() {\n    const { context } = this.state\n    return context ? (\n      <LeafletProvider value={context}>\n        <div style={paneStyles}>{this.props.children}</div>\n      </LeafletProvider>\n    ) : null\n  }\n}\n\nexport default withLeaflet(Pane)\n","// @flow\n\nimport { Popup as LeafletPopup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport DivOverlay from './DivOverlay'\nimport type { LatLng, DivOverlayProps } from './types'\n\ntype LeafletElement = LeafletPopup\ntype Props = {\n  autoPan?: boolean,\n  position?: LatLng,\n} & DivOverlayProps\n\nclass Popup extends DivOverlay<LeafletElement, Props> {\n  static defaultProps = {\n    pane: 'popupPane',\n  }\n\n  getOptions(props: Props): Props {\n    return {\n      ...super.getOptions(props),\n      autoPan: false,\n    }\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    const options = this.getOptions(props)\n    options.autoPan = props.autoPan !== false\n    return new LeafletPopup(options, props.leaflet.popupContainer)\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setLatLng(toProps.position)\n    }\n  }\n\n  componentDidMount() {\n    const { position } = this.props\n    const { map, popupContainer } = this.props.leaflet\n    const el = this.leafletElement\n\n    if (map != null) {\n      map.on({\n        popupopen: this.onPopupOpen,\n        popupclose: this.onPopupClose,\n      })\n    }\n\n    if (popupContainer) {\n      // Attach to container component\n      popupContainer.bindPopup(el)\n    } else {\n      // Attach to a Map\n      if (position) {\n        el.setLatLng(position)\n      }\n      el.openOn(map)\n    }\n  }\n\n  componentWillUnmount() {\n    const { map } = this.props.leaflet\n\n    if (map != null) {\n      map.off({\n        popupopen: this.onPopupOpen,\n        popupclose: this.onPopupClose,\n      })\n      map.removeLayer(this.leafletElement)\n    }\n\n    super.componentWillUnmount()\n  }\n\n  onPopupOpen = ({ popup }: { popup: LeafletElement }) => {\n    if (popup === this.leafletElement) {\n      this.onOpen()\n    }\n  }\n\n  onPopupClose = ({ popup }: { popup: LeafletElement }) => {\n    if (popup === this.leafletElement) {\n      this.onClose()\n    }\n  }\n\n  onRender = () => {\n    if (this.props.autoPan !== false && this.leafletElement.isOpen()) {\n      if (this.leafletElement._map && this.leafletElement._map._panAnim) {\n        this.leafletElement._map._panAnim = undefined\n      }\n      this.leafletElement._adjustPan()\n    }\n  }\n}\n\nexport default withLeaflet(Popup)\n","// @flow\n\nimport { Polygon as LeafletPolygon } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletPolygon\ntype Props = {\n  positions: LatLng[] | LatLng[][] | LatLng[][][],\n} & PathProps\n\nclass Polygon extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletPolygon(props.positions, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.positions !== fromProps.positions) {\n      this.leafletElement.setLatLngs(toProps.positions)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Polygon)\n","// @flow\n\nimport { Polyline as LeafletPolyline } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletPolyline\ntype Props = {\n  positions: LatLng[] | LatLng[][],\n} & PathProps\n\nclass Polyline extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletPolyline(props.positions, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.positions !== fromProps.positions) {\n      this.leafletElement.setLatLngs(toProps.positions)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Polyline)\n","// @flow\n\nimport { TileLayer as LeafletTileLayer } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport GridLayer from './GridLayer'\nimport type { GridLayerProps } from './types'\n\ntype LeafletElement = LeafletTileLayer\ntype Props = { url: string } & GridLayerProps\n\nclass TileLayer extends GridLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletTileLayer(props.url, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n    if (toProps.url !== fromProps.url) {\n      this.leafletElement.setUrl(toProps.url)\n    }\n  }\n}\n\nexport default withLeaflet(TileLayer)\n","// @flow\n\nimport { Rectangle as LeafletRectangle } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLngBounds, PathProps } from './types'\n\ntype LeafletElement = LeafletRectangle\ntype Props = { bounds: LatLngBounds } & PathProps\n\nclass Rectangle extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletRectangle(props.bounds, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.bounds !== fromProps.bounds) {\n      this.leafletElement.setBounds(toProps.bounds)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Rectangle)\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Scale\ntype Props = {\n  imperial?: boolean,\n  maxWidth?: number,\n  metric?: boolean,\n  updateWhenIdle?: boolean,\n} & MapControlProps\n\nclass ScaleControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Scale(props)\n  }\n}\n\nexport default withLeaflet(ScaleControl)\n","// @flow\n\nimport { Tooltip as LeafletTooltip } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport DivOverlay from './DivOverlay'\nimport type { DivOverlayProps } from './types'\n\ntype LeafletElement = LeafletTooltip\ntype Props = DivOverlayProps\n\nclass Tooltip extends DivOverlay<LeafletElement, Props> {\n  static defaultProps = {\n    pane: 'tooltipPane',\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletTooltip(\n      this.getOptions(props),\n      props.leaflet.popupContainer,\n    )\n  }\n\n  componentDidMount() {\n    const { popupContainer } = this.props.leaflet\n    if (popupContainer == null) return\n\n    popupContainer.on({\n      tooltipopen: this.onTooltipOpen,\n      tooltipclose: this.onTooltipClose,\n    })\n    popupContainer.bindTooltip(this.leafletElement)\n  }\n\n  componentWillUnmount() {\n    const { popupContainer } = this.props.leaflet\n    if (popupContainer == null) return\n\n    popupContainer.off({\n      tooltipopen: this.onTooltipOpen,\n      tooltipclose: this.onTooltipClose,\n    })\n    if (popupContainer._map != null) {\n      popupContainer.unbindTooltip(this.leafletElement)\n    }\n  }\n\n  onTooltipOpen = ({ tooltip }: { tooltip: LeafletElement }) => {\n    if (tooltip === this.leafletElement) {\n      this.onOpen()\n    }\n  }\n\n  onTooltipClose = ({ tooltip }: { tooltip: LeafletElement }) => {\n    if (tooltip === this.leafletElement) {\n      this.onClose()\n    }\n  }\n}\n\nexport default withLeaflet(Tooltip)\n","// @flow\n\nimport { TileLayer } from 'leaflet'\nimport { isEqual } from 'lodash'\n\nimport { withLeaflet } from './context'\nimport GridLayer from './GridLayer'\nimport { EVENTS_RE } from './MapEvented'\nimport type { GridLayerProps } from './types'\n\ntype LeafletElement = TileLayer.WMS\ntype Props = { url: string } & GridLayerProps\n\nclass WMSTileLayer extends GridLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const { url, ...params } = props\n    return new TileLayer.WMS(url, this.getOptions(params))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n\n    const { url: prevUrl, opacity: _po, zIndex: _pz, ...prevParams } = fromProps\n    const { url, opacity: _o, zIndex: _z, ...params } = toProps\n\n    if (url !== prevUrl) {\n      this.leafletElement.setUrl(url)\n    }\n    if (!isEqual(params, prevParams)) {\n      this.leafletElement.setParams(params)\n    }\n  }\n\n  getOptions(params: Object): Object {\n    const superOptions = super.getOptions(params)\n    return Object.keys(superOptions).reduce((options, key) => {\n      if (!EVENTS_RE.test(key)) {\n        options[key] = superOptions[key]\n      }\n      return options\n    }, {})\n  }\n}\n\nexport default withLeaflet(WMSTileLayer)\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Zoom\ntype Props = {\n  zoomInText?: string,\n  zoomInTitle?: string,\n  zoomOutText?: string,\n  zoomOutTitle?: string,\n} & MapControlProps\n\nclass ZoomControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Zoom(props)\n  }\n}\n\nexport default withLeaflet(ZoomControl)\n","// @flow\n\nimport { isEqual } from 'lodash'\nimport { withLeaflet } from './context'\nimport { EVENTS_RE } from './MapEvented'\nimport { Layer } from 'leaflet'\nimport { Util } from 'leaflet'\nimport { get as esriGet } from 'esri-leaflet'\nimport { request as esriRequest } from 'esri-leaflet'\nimport type { EsriFeatureLayerProps } from './types'\nimport type { GridLayerProps } from './types'\nimport { BasemapLayer } from 'esri-leaflet'\nimport { featureLayer } from 'esri-leaflet'\nimport MapLayer from './MapLayer'\nimport { connect } from 'react-redux'\n//import { FeatureLayerService } from  'esri-leaflet'\n//import GeoJSON from './GeoJSON'\n//import { geoJson } from 'leaflet'\n\ntype LeafletElement = featureLayer\ntype Props = { url: string, color: string} & EsriFeatureLayerProps\n\nclass EsriFeatureLayer extends MapLayer<LeafletElement, Props> {\n\n  /* Parent MapLayer has the component lifecycle functions*/\n\n  //Runs for every gtk layer when loading the app\n  createLeafletElement(props: Props): LeafletElement {\n\n    const { url, color, ...params } = props\n    let featureLayerParams = {\n      \"url\" : url,\n      style: function () {\n        return { color: color, weight: 1 };\n      },\n      \"useCors\" : true,\n      \"cacheLayers\" :true, // kun tämä on päällä, createNewLayer ajetaan\n      \"simplifyFactor\": 2\n      //\"timeFilterMode\" : 'client'\n    }\n\n    var esriLayer = new featureLayer(featureLayerParams)\n    //tekeekö featureLayer objekti kaikki kutsut jo taustalla?\n    //jos niin, tämän kutsun voisi siirtää järkevämpään paikkaan\n    /* Testing a single request to a gtk mapserver\n    var serviceUrl = url\n    console.log(\"url\",serviceUrl)\n    esriRequest(\"http://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/12\", {}, function(error, response){\n      if(error){\n        console.log('error', error);\n      } else {\n        console.log('response.name', response.name);\n      }\n    });*/\n\n    esriLayer.on('click', function(ev){\n      console.log('feature layer click event: ',ev)\n    })\n    esriLayer.on('popupopen', function(ev){\n      // get the properties of click popup single feature\n      console.log('popupopen!',ev.layer.feature.properties)\n      return\n    })\n    //Runs only once when checking the layer checkbox ??\n    esriLayer.on('loading', function(ev){\n      //console.log('loading feature layer!',ev)\n      return\n    })\n    //Runs only once when checking the layer checkbox ??\n    esriLayer.on('load', function(ev){\n      console.log('loaded all queried feature layers event:',ev)\n      return\n    })\n    esriLayer.on('remove', function(ev){\n      console.log('remove event:',ev)\n      return\n    })\n    //rikkoutuu ennen kun tänne päästään\n    esriLayer.on('addfeature', function(ev){\n      console.log('removed feature back to map: ',ev)\n    })\n\n    esriLayer.metadata(function(error, metadata){\n      //console.log('metadata',metadata);\n    });\n\n    esriLayer.bindPopup(function(e){\n      var popupTemplate = \"\"\n      for(let key in e.feature.properties){\n        if (e.feature.properties.hasOwnProperty(key)) {\n          if(key.indexOf(\".\")===-1){\n            popupTemplate+=key+\" {\"+key+\"} <br />\"\n          }\n          else{\n            //the json object keys need to be renamed as well.. if the problem with template is about \".\" in json structure\n            key = key.replace(\".\",\"_\")\n          }\n          //console.log(key + \" -> \" + e.feature.properties[key]);\n        }\n      }\n      //devnote: we could change the template into semantic UI's modal\n      return Util.template(popupTemplate, e.feature.properties)\n    });\n    return esriLayer\n  }\n\n  //Runs on app load (no interaction needed)\n  //Seems like not running on layer selection\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n    const { url: prevUrl, opacity: _po, zIndex: _pz, ...prevParams } = fromProps\n    const { url, opacity: _o, zIndex: _z, ...params } = toProps\n\n    if (url !== prevUrl) {\n      this.leafletElement.setUrl(url)\n    }\n    if (!isEqual(params, prevParams)) {\n      this.leafletElement.setParams(params)\n    }\n  }\n\n  getOptions(params: Object): Object {\n    const superOptions = super.getOptions(params)\n    return Object.keys(superOptions).reduce((options, key) => {\n      if (!EVENTS_RE.test(key)) {\n        options[key] = superOptions[key]\n      }\n      return options\n    }, {})\n  }\n}\n\nexport default withLeaflet(EsriFeatureLayer)\n//export default connect(EsriFeatureLayerProps)(EsriFeatureLayer)\n","// @flow\n\nimport React, { Component, Fragment } from 'react'\nimport { Map } from './Map'\nimport TileLayer  from './TileLayer'\nimport Marker  from './Marker'\nimport Popup from './Popup'\n\ntype Position = [number, number]\n\ntype Props = {|\n  content: string,\n  position: Position,\n|}\n\ntype MarkerData = {| ...Props, key: string |}\n\nconst HotspotPopupMarker = ({ content, position }: Props) => (\n  <Marker position={position}>\n    <Popup>{content}</Popup>\n  </Marker>\n)\n\nconst HotspotMarkersList = ({ markers }: { markers: Array<MarkerData> }) => {\n  const items = markers.map(({ key, ...props }) => (\n    <HotspotPopupMarker key={key} {...props} />\n  ))\n  return <Fragment>{items}</Fragment>\n}\n\ntype State = {\n  markers: Array<MarkerData>,\n}\n\nexport default class MapHotspots extends Component<{}, State> {\n  state = {\n    markers: [\n      { key: 'marker1', position: [68.7112, 25.6089], content: 'Lisätty karttakohde 1  Tähän valokuvaa yms. ' },\n      { key: 'marker2', position: [68.7912, 25.6489], content: 'Lisätty karttakohde 2. Tähän valokuvaa yms. ' },\n      { key: 'marker3', position: [68.8512, 25.6889], content: 'Lisätty karttakohde 3. Tähän valokuvaa yms. ' },\n    ],\n  }\n\n  render() {\n    return (\n        <HotspotMarkersList markers={this.state.markers} />\n    )\n  }\n}\n","const views = {\n  MAP: 'MAP',\n  HOTSPOTFORM: 'HOTSPOTFORM',\n  HOTSPOT: 'HOTSPOT',\n  LOGINFORM: 'LOGINFORM',\n  REGISTERFORM: 'REGISTERFORM'\n}\n\nconst dateFormat = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n}\n\nexport { views, dateFormat }","import { views }  from '../constants'\n\nconst initialState = {\n  newCoordinates: [],\n  newLng: 0,\n  newLat: 0,\n  hotspot: null,\n  showing: views.MAP,\n  previousView: views.MAP,\n  isUserLoggedIn: false\n}\n\nconst viewReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SHOW_HOTSPOT_FORM':\n      return {\n        ...state,\n        newCoordinates: action.newCoordinates,\n        showing: views.HOTSPOTFORM\n      }\n    case 'SHOW_MAP':\n      return {\n        ...state,\n        showing: views.MAP\n      }\n    case 'SHOW_PREVIOUS':\n      return {\n        ...state,\n        showing: state.previousView,\n        previousView: views.MAP\n      }\n    case 'SHOW_HOTSPOT':\n      return {\n        ...state,\n        showing: views.HOTSPOT\n      }\n    case 'HIDE_HOTSPOT':\n      return {\n        ...state,\n        showing: views.MAP\n      }\n    case 'SHOW_LOGINFORM':\n      return {\n        ...state,\n        previousView: state.showing,\n        showing: views.LOGINFORM\n      }\n    case 'SHOW_REGISTERFORM':\n      return {\n        ...state,\n        previousView: state.showing,\n        showing: views.REGISTERFORM\n      }\n    case 'SET_USERLOGGEDIN':\n      return {\n        ...state,\n        isUserLoggedIn: action.loggedIn\n      }\n    default:\n      return state\n  }\n}\n\nexport const showHotspotForm = (newCoordinates) => {\n  return dispatch => {\n    if (newCoordinates.latlng) {\n      newCoordinates = [newCoordinates.latlng.lng, newCoordinates.latlng.lat]\n    }\n    dispatch({\n      type: 'SHOW_HOTSPOT_FORM',\n      newCoordinates\n    })\n  }\n}\n\nexport const hideHotspotForm = () => {\n  return dispatch => {\n    dispatch({\n      type: 'SHOW_MAP'\n    })\n  }\n}\n\nexport const hideHotspot = () => {\n  return dispatch => {\n    dispatch({\n      type: 'SHOW_MAP'\n    })\n  }\n}\n\nexport const showHotspot = (id) => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_HOTSPOT'\n      })\n  }\n}\n\nexport const showLoginForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_LOGINFORM'\n      })\n  }\n}\n\nexport const hideLoginForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_PREVIOUS'\n      })\n  }\n}\n\nexport const showRegisterForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_REGISTERFORM'\n      })\n  }\n}\n\nexport const hideRegisterForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_PREVIOUS'\n      })\n  }\n}\n\nexport const setUserLoggedIn = (loggedIn) => {\n  return dispatch => {\n    dispatch({\n      type: 'SET_USERLOGGEDIN',\n      loggedIn\n    })\n  }\n}\n\nexport default viewReducer","import axios from 'axios'\nconst baseUrl = '/api/hotspots'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getHotspotsByCoordinates = async (lng, lat) => {\n  const response = await axios.get(`${baseUrl}/@${lng},${lat}`)\n  return response.data\n}\n\nconst getHotspot = async (id) => {\n  const response = await axios.get(`${baseUrl}/${id}`)\n  return response.data\n}\n\nconst create = async (hotspot) => {\n  const response = await axios.post(baseUrl, hotspot, { withCredentials: true })\n  return response.data\n}\n\nexport default { getAll, getHotspotsByCoordinates, getHotspot, create }","import axios from 'axios'\nconst baseUrl = '/api/comments'\n\nconst create = async (comment) => {\n  const response = await axios.post(baseUrl, comment, { withCredentials: true })\n  return response.data\n}\n\nexport default { create }","import hotspotService from '../services/hotspotService'\nimport commentService from '../services/commentService'\n\nconst initialState = {\n  hotspots:  [],\n  currentHotspot: null,\n  newHotspot: null,\n  error: null\n}\n\nconst hotspotReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'GET_HOTSPOTS_SUCCESS':\n      return {\n        hotspots: action.hotspots,\n        error: null\n      }\n    case 'GET_HOTSPOTS_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    case 'SET_CURRENT_HOTSPOT':\n      return {\n        ...state,\n        currentHotspot: state.hotspots.find(hs => hs.id === action.id),\n        error: null\n      }\n    case 'ADD_HOTSPOT_SUCCESS':\n      return {\n        ...state,\n        hotspots: state.hotspots.concat(action.hotspot),\n        newHotspot: action.hotspot,\n        error: null\n      }\n    case 'ADD_HOTSPOT_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    case 'ADD_COMMENT_SUCCESS':\n      const hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\n      hotspot.comments = hotspot.comments.concat(action.comment)\n      return {\n        ...state,\n        hotspots: state.hotspots.map(hs =>\n          hs.id === hotspot.id\n          ? hotspot\n          : hs),\n        currentHotspot: hotspot,\n        error: null\n      }\n    case 'ADD_COMMENT_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    default:\n      return state\n  }\n}\n\nexport const initialiseHotspots = () => {\n  return async dispatch => {\n    try {\n      const hotspots = await hotspotService.getAll()\n      console.log('Fetched hotspots: ',hotspots)\n      dispatch({\n        type:'GET_HOTSPOTS_SUCCESS',\n        hotspots\n      })\n    } catch (error) {\n      dispatch({\n        type: 'GET_HOTSPOTS_FAIL',\n        error: 'Virhe kohteiden haussa! ' + error\n      })\n    }\n  }\n}\n\nexport const addHotspot = (hotspot) => {\n  return async dispatch => {\n    try {\n      const newHotspot = await hotspotService.create(hotspot)\n      dispatch({\n        type: 'ADD_HOTSPOT_SUCCESS',\n        hotspot: newHotspot\n      })\n    } catch (error) {\n      dispatch({\n        type: 'ADD_HOTSPOT_FAIL',\n        error: 'Kohdetta ei voitu lisätä! ' + error\n      })\n    }\n  }\n}\n\nexport const setCurrentHotspot = (id) => {\n  return dispatch => {\n    dispatch({\n      type: 'SET_CURRENT_HOTSPOT',\n      id\n    })\n  }\n}\n\nexport const addComment = (comment) => {\n  return async dispatch => {\n    try {\n      const newComment = await commentService.create(comment)\n      dispatch({\n        type: 'ADD_COMMENT_SUCCESS',\n        comment: newComment\n      })\n    } catch (error) {\n      dispatch({\n        type: 'ADD_COMMENT_FAIL',\n        error: 'Kommentia ei voitu lisätä! ' + error\n      })\n    }\n  }\n}\n\nexport default hotspotReducer","// @flow\n\nimport React, { Component } from 'react'\nimport { Map, TileLayer, EsriFeatureLayer,LayersControl, Popup } from './src'\nimport { connect } from 'react-redux'\nimport { showHotspotForm, showHotspot } from '../../reducers/viewReducer'\nimport { setCurrentHotspot } from '../../reducers/hotspotReducer'\n\ntype State = {\n  lat: number,\n  lng: number,\n  zoom: number,\n}\nconst { BaseLayer, Overlay } = LayersControl\n\nclass EsriGtkMap extends Component<{}, State> {\n  state = {\n    lat: 68.7512,\n    lng: 25.6189,\n    zoom: 7,\n  }\n\n  handleMapClick = (coordinates) => {\n    //console.log('esri-feature-layer example this',this)\n    console.log('coordinates2: ', coordinates)\n    if (this.props.isUserLoggedIn) {\n      this.props.showHotspotForm(coordinates)\n    }\n  }\n\n  handleHotspotClick = (e) => {\n    console.log(e.layer.feature.properties.id)\n    this.props.setCurrentHotspot(e.layer.feature.properties.id)\n    this.props.showHotspot()\n  }\n\n  render() {\n    return (\n      <Map\n        center={[this.state.lat, this.state.lng]}\n        zoom={this.state.zoom}\n        handleMapClick={this.handleMapClick}\n        handleHotspotClick={this.handleHotspotClick}\n        hotspots={this.props.hotspots}\n      >\n        <LayersControl position=\"topright\">\n          <LayersControl.BaseLayer name=\"Peruskartta\" >\n            <TileLayer\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n              url=\"https://tiles.kartat.kapsi.fi/peruskartta/{z}/{x}/{y}.png\"\n            />\n          </LayersControl.BaseLayer>\n          <LayersControl.BaseLayer name=\"OpenStreetMap\" checked >\n            <TileLayer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n          </LayersControl.BaseLayer>\n          <LayersControl.Overlay\n          name=\"<span class='layers-control-label lightsteelblue'>kaivospiirihakemukset</span>\">\n            <EsriFeatureLayer name=\"kaivospiirihakemukset\"\n              color=\"lightsteelblue\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/0\"\n            />\n          </LayersControl.Overlay>\n\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label steelblue'>kaivospiirit</span>\">\n            <EsriFeatureLayer\n              color=\"steelblue\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/1\"\n            />\n          </LayersControl.Overlay>\n\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label aqua'>kaivospiirit karenssissa</span>\">\n            <EsriFeatureLayer name=\"kaivospiirit_karenssissa\"\n              color=\"aqua\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/2\"\n            >\n            </EsriFeatureLayer>\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label darkcyan'>kaivoslupahakemukset</span>\">\n            <EsriFeatureLayer name=\"kaivoslupahakemukset\"\n              color=\"darkcyan\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/3\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label lightslategray'>kaivosalueet voimassa</span>\">\n            <EsriFeatureLayer name=\"kaivosalueet_voimassa\"\n              color=\"lightslategray\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/4\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label mediumpurple'>valtaushakemukset</span>\">\n            <EsriFeatureLayer name=\"valtaushakemukset\"\n              color=\"mediumpurple\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/5\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label mediumorchid'>valtaukset</span>\">\n            <EsriFeatureLayer name=\"valtaukset\"\n              color=\"mediumorchid\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/6\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label deeppink'>valtaukset karenssissa</span>\" >\n            <EsriFeatureLayer name=\"valtaukset_karenssissa\"\n              color=\"deeppink\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/7\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label lightpink'>malminetsintalupahakemukset</span>\" >\n            <EsriFeatureLayer name=\"malminetsintalupahakemukset\"\n              color=\"lightpink\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/8\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label violet'>malminetsintaalueet</span>\" >\n            <EsriFeatureLayer name=\"malminetsintaalueet\"\n              color=\"violet\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/9\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label sienna'>malminetsintaluvat karenssissa</span>\" >\n            <EsriFeatureLayer name=\"malminetsintaluvat_karenssissa\"\n              color=\"sienna\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/10\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label lightsalmon'>varausilmoitushakemukset</span>\" >\n            <EsriFeatureLayer name=\"varausilmoitushakemukset\"\n              color=\"lightsalmon\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/11\"\n            ></EsriFeatureLayer>\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label tomato'>varausilmoitukset karenssissa</span>\" >\n            <EsriFeatureLayer name=\"varausilmoitukset_karenssissa\"\n            color=\"tomato\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/12\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label firebrick'>varausilmoitukset</span>\" >\n            <EsriFeatureLayer name=\"varausilmoitukset\"\n              color=\"firebrick\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/13\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label orange'>kullanhuuhdontaluvat</span>\" >\n            <EsriFeatureLayer name=\"kullanhuuhdontaluvat\"\n              color=\"orange\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/14\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"<span class='layers-control-label yellow'>kullanhuuhdontalupahakemukset</span>\" >\n            <EsriFeatureLayer name=\"kullanhuuhdontalupahakemukset\"\n            color=\"yellow\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/15\"\n            />\n          </LayersControl.Overlay>\n        </LayersControl>\n      </Map>\n\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    hotspots: state.map.hotspots,\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  showHotspotForm,\n  showHotspot,\n  setCurrentHotspot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EsriGtkMap)\n","import React, { Component } from 'react'\n//import { Embed } from 'semantic-ui-react'\nimport EsriGtkMap from './EsriGtkMap'\nimport './esri-gtk-map.css'\n\nclass MapContainer extends Component {\n  render() {\n    return (\n    <div id =\"MapContainer\">\n      <EsriGtkMap />\n    </div>\n    )\n  }\n}\n\nexport default MapContainer\n","import axios from 'axios'\n\nconst login = async (credentials) => {\n  const response = await axios.post('/login', credentials)\n  return response.data\n}\n\nconst logout = async () => {\n  const response = await axios.post('/logout', { withCredentials: true })\n  return response.data\n}\n\nconst register = async (userInfo) => {\n  const response = await axios.post('/register', userInfo)\n  return response.data\n}\n\nexport default { login, logout, register }","import React from 'react'\nimport { connect } from 'react-redux'\nimport { NavLink, withRouter } from 'react-router-dom'\nimport { Menu, Dropdown, Icon, Container } from 'semantic-ui-react'\nimport { showLoginForm, setUserLoggedIn } from '../reducers/viewReducer'\nimport loginService from '../services/loginService'\n\nclass MenuBar extends React.Component {\n\n  logout = async () => {\n    await loginService.logout()\n    this.props.setUserLoggedIn(false)\n  }\n\n  render() {\n\n    const subMenu = () => {\n      if (this.props.isUserLoggedIn) {\n        return (\n          <Dropdown item icon='bars' direction='left'>\n            <Dropdown.Menu>\n              <Dropdown.Item onClick={ this.logout }>\n                Kirjaudu ulos\n                <Icon style={{ paddingLeft: '5px' }} name='log out' />\n              </Dropdown.Item>\n            </Dropdown.Menu>\n          </Dropdown>\n        )\n      } else {\n        return (\n          <Menu.Item onClick={ this.props.showLoginForm }>\n            <Icon name='sign in' />\n          </Menu.Item>\n        )\n      }\n    }\n\n    return (\n      <Menu attached='top' tabular>\n        <Container>\n          <Menu.Item>Luontovahdit</Menu.Item>\n          <Menu.Menu position='right'>\n            { subMenu() }\n          </Menu.Menu>\n        </Container>\n      </Menu>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  showLoginForm,\n  setUserLoggedIn\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MenuBar))","const initialState = {\n  selectedGTKLayers : [],\n  selectedBasemapLayer : [],\n  hotspots:  [\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": \"5c1e0b21ee7a321eb40f3e12\",\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [24.8297076, 60.3190656]\n      }\n    },\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": \"5c1e2ecbc969793cecad491a\",\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [25, 60.2]\n      }\n    }\n  ]\n}\n\nconst mapReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SET_HOTSPOTS':\n      return {\n         ...state, hotspots: action.hotspots\n      }\n    case 'ADD_HOTSPOT':\n      return {\n       ...state, hotspots: state.hotspots.concat(action.hotspot)\n      }\n    case 'SELECT_BASEMAP_LAYER':\n      return {\n          ...state,selectedBasemapLayer: action.basemapLayer\n      }\n    case 'SELECT_GTK_LAYER':\n      return {\n         ...state, selectedGTKLayers: state.selectedGTKLayers.concat(action.GTKLayer)\n      }\n    case 'DESELECT_GTK_LAYER':\n      return {\n         ...state, selectedGTKLayers:state.selectedGTKLayers.slice(action.GTKLayer)\n      }\n      case 'SELECT_GTK_FEATURE':\n        return {\n           ...state, selectedGTKFeature: action.GTKFeature \n      }\n    default:\n      return state\n  }\n}\n\n\nexport const setHotspotsOnMap = (hotspots) => {\n  return dispatch => {\n    const hotspotFeatures = hotspots.map(hs => {\n      return {\n        'type': 'Feature',\n        'properties': {\n          'id': hs.id,\n          'icon': 'star'\n        },\n        'geometry': {\n          'type': 'Point',\n          'coordinates': hs.location.coordinates\n        }\n      }\n    })\n    console.log(hotspotFeatures)\n    dispatch({\n      type: 'SET_HOTSPOTS',\n      hotspots: hotspotFeatures\n    })\n  }\n}\n//TODO: finish if this operation is necessary\n/*export const setGTKLayersOnMap = (gtklayers) => {\n  return dispatch => {\n    const gtkFeatures = gtklayers.map(hs => {\n      //TODO: tarvisiko tähän kirjoittaa auki featureLayer() class constructorin param optionsit?\n      return {\n        'type': 'Feature',\n        'properties': {\n          'id': hs.id,\n          'icon': 'star'\n        },\n        'geometry': {\n          'type': 'Point',\n          'coordinates': hs.location.coordinates\n        }\n      }\n    })\n    console.log(gtkFeatures)\n    dispatch({\n      type: 'SET_HOTSPOTS',\n      hotspots: gtkFeatures\n    })\n  }\n}*/\n\nexport const addHotspot = (hotspot) => {\n  return dispatch => {\n    let newHotspot = {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": hotspot.id,\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        'type': 'Point',\n        'coordinates': hotspot.location.coordinates\n      }\n    }\n    console.log(newHotspot)\n    console.log(hotspot.location)\n    dispatch({\n      type: 'ADD_HOTSPOT',\n      hotspot: newHotspot\n    })\n  }\n}\n\nexport default mapReducer\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Form, TextArea } from 'semantic-ui-react'\nimport { hideHotspotForm } from '../reducers/viewReducer'\nimport { addHotspot } from '../reducers/hotspotReducer'\nimport { addHotspot as addHotspotToMap } from '../reducers/mapReducer'\nimport { views } from '../constants'\n\nclass HotspotForm extends Component {\n\n  close = () => this.props.hideHotspotForm()\n\n  addHotspot = async (event) => {\n    event.preventDefault()\n\n    if (event.target.title.value.length > 0 &&\n        event.target.description.value.length > 0) {\n\n      const hotspotObject = {\n        title: event.target.title.value,\n        description: event.target.description.value,\n        location: {\n          type: 'Point',\n          coordinates: this.props.coordinates\n        }\n      }\n\n      console.log('coordinates: ', this.props.coordinates)\n      console.log('new hs?: ', hotspotObject)\n      event.target.title.value = ''\n      event.target.description.value = ''\n\n      await this.props.addHotspot(hotspotObject)\n\n      if (this.props.error) {\n        console.log('Error adding hotspot...')\n        console.log(this.props.error)\n      } else {\n        console.log('Added hotspot!')\n        console.log(this.props.newHotspot)\n        this.props.addHotspotToMap(this.props.newHotspot)\n        this.props.hideHotspotForm()\n      }\n    }\n  }\n\n  render() {\n    console.log('open ' + this.props.open)\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Lisää kohde</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.addHotspot }>\n              <div>\n                Kohteen nimi:\n                <Form.Input\n                  type=\"text\"\n                  name=\"title\"\n                />\n              </div>\n              <div>\n                Havainto:\n                <TextArea\n                  name=\"description\"\n                  style={{ minHeight: 100 }} />\n              </div>\n              <Button type=\"submit\">\n                Lisää\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.HOTSPOTFORM,\n    coordinates: state.view.newCoordinates,\n    newHotspot: state.hotspot.newHotspot,\n    error: state.hotspot.error\n  }\n}\n\nconst mapDispatchToProps = {\n  hideHotspotForm,\n  addHotspot,\n  addHotspotToMap\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HotspotForm)","import React from 'react'\nimport { Segment, Label, Button, Icon, Header, Divider } from 'semantic-ui-react'\nimport { dateFormat } from '../constants'\n\nclass Comments extends React.Component {\n\n  render() {\n    console.log(this.props)\n    return (\n      <div>\n        { this.props.comments.map(comment =>\n          <div key={ comment.id }>\n            <Segment>\n              { new Date(comment.createdAt).toLocaleDateString('fi-FI', dateFormat) } lisännyt { comment.addedBy.name }\n              <Divider hidden />\n              <p>{ comment.content }</p>\n              <Divider hidden />\n              <Button as='div' labelPosition='right'>\n                <Button compact basic color='green'>\n                  <Icon name='thumbs up' />\n                </Button>\n                <Label basic pointing='left'>\n                  { comment.upVotes }\n                </Label>\n              </Button>\n              <Button as='div' labelPosition='right'>\n                <Button compact basic color='orange'>\n                  <Icon name='thumbs down' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { comment.downVotes }\n                </Label>\n              </Button>\n              <Button compact basic color='red'>\n                  <Icon name='flag' />\n              </Button>\n            </Segment>\n            <Divider hidden />\n          </div>\n        ) }\n      </div>\n    )\n  }\n}\n\nexport default Comments","import React from 'react'\nimport { Segment, Button, Divider } from 'semantic-ui-react'\n\nclass Togglable extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      visible: false\n    }\n  }\n\n  toggleVisibility = () => {\n    this.setState({ visible: !this.state.visible })\n  }\n\n  render() {\n    const hideWhenVisible = { display: this.state.visible ? 'none' : '' }\n    const showWhenVisible = { display: this.state.visible ? '' : 'none' }\n\n    return (\n      <Segment>\n        <div style={hideWhenVisible}>\n          <Button onClick={this.toggleVisibility}>{this.props.buttonLabel}</Button>\n        </div>\n        <div style={showWhenVisible}>\n          <Button basic onClick={this.toggleVisibility}>Peruuta</Button>\n          <Divider hidden />\n          {this.props.children}\n        </div>\n      </Segment>\n    )\n  }\n}\n\nexport default Togglable","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Form, TextArea } from 'semantic-ui-react'\nimport { addComment } from '../reducers/hotspotReducer'\n\nclass CommentForm extends Component {\n\n  addComment = async (event) => {\n    event.preventDefault()\n\n    if (event.target.comment.value.length > 0) {\n\n      const commentObject = {\n        content: event.target.comment.value,\n        inHotspot: this.props.hotspotId\n      }\n\n      event.target.comment.value = ''\n\n      await this.props.addComment(commentObject)\n\n      if (this.props.error) {\n        console.log('Error adding comment...')\n        console.log(this.props.error)\n      } else {\n        console.log('Added hotspot!')\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Form onSubmit={ this.addComment }>\n      <div>\n        <TextArea\n          name=\"comment\"\n          style={{ minHeight: 100 }} />\n      </div>\n      <Button type=\"submit\">\n        Lisää\n      </Button>\n    </Form>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    error: state.hotspot.error\n  }\n}\n\nconst mapDispatchToProps = {\n  addComment\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentForm)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Icon, Label, Divider, Segment } from 'semantic-ui-react'\nimport { hideHotspot } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport Comments from './Comments'\nimport Togglable from './Togglable'\nimport CommentForm from './CommentForm'\n\nclass Hotspot extends Component {\n\n  close = () => this.props.hideHotspot()\n\n  render() {\n\n    if (this.props.hotspot) {\n      const hs = this.props.hotspot\n\n      const showCommentButton = () => {\n        if (this.props.isUserLoggedIn) {\n          return (\n            <Togglable buttonLabel=\"Kommentoi\">\n              <CommentForm hotspotId={ hs.id } />\n            </Togglable>\n          )\n        } else {\n          return null\n        }\n      }\n\n      return (\n        <div>\n          <Modal\n            open={ this.props.open }\n            closeOnDimmerClick={ false }\n            onClose={ this.close }\n            closeIcon\n          >\n            <Modal.Header>{ hs.title }</Modal.Header>\n            <Modal.Content>\n              <Button as='div' labelPosition='right'>\n                <Button basic color='green'>\n                  <Icon name='thumbs up' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { hs.upVotes }\n                </Label>\n              </Button>\n              <Button as='div' labelPosition='right'>\n                <Button basic color='orange'>\n                  <Icon name='thumbs down' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { hs.downVotes }\n                </Label>\n              </Button>\n              <Button basic color='red'>\n                  <Icon name='flag' />\n              </Button>\n              lisännyt { hs.addedBy.name }\n              <Divider hidden />\n              { hs.description }\n              <Divider hidden />\n              { showCommentButton() }\n              <Comments comments={ hs.comments } />\n            </Modal.Content>\n          </Modal>\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <Modal\n            open={this.props.open}\n            closeOnDimmerClick={false}\n            onClose={this.close}\n            closeIcon\n          >\n            <Modal.Header>Kohdetta ei löytynyt!</Modal.Header>\n            <Modal.Content>\n              <p>Jotain meni pieleen.</p>\n            </Modal.Content>\n          </Modal>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.HOTSPOT,\n    hotspot: state.hotspot.currentHotspot,\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  hideHotspot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Hotspot)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { Button, Modal, Form, Icon } from 'semantic-ui-react'\nimport { hideLoginForm, setUserLoggedIn, showRegisterForm } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport loginService from '../services/loginService'\n\nclass LoginForm extends Component {\n\n  open = () => {\n    this.props.history.push('/login')\n  }\n\n  close = () => {\n    this.props.hideLoginForm()\n    this.props.history.push('/')\n  }\n\n  login = async (event) => {\n    event.preventDefault()\n\n    if (event.target.username.value.length > 0 &&\n        event.target.password.value.length > 0) {\n      try {\n        await loginService.login({\n          username: event.target.username.value,\n          password: event.target.password.value\n        })\n        this.props.setUserLoggedIn(true)\n        this.props.hideLoginForm()\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n\n  render() {\n\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onOpen={this.open}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Tervetuloa!</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.login }>\n              <div>\n                Käyttäjätunnus:\n                <Form.Input\n                  type=\"text\"\n                  name=\"username\"\n                />\n              </div>\n              <div>\n                Salasana:\n                <Form.Input\n                  type=\"password\"\n                  name=\"password\"\n                />\n              </div>\n              <Button type=\"submit\" icon labelPosition='right'>\n                Kirjaudu sisään\n                <Icon name='sign in' />\n              </Button>\n              <Button type=\"button\" onClick={ this.props.showRegisterForm }>\n                Rekisteröidy?\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.LOGINFORM\n  }\n}\n\nconst mapDispatchToProps = {\n  hideLoginForm,\n  setUserLoggedIn,\n  showRegisterForm\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoginForm))","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Form } from 'semantic-ui-react'\nimport { hideRegisterForm } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport loginService from '../services/loginService'\n\nclass RegisterForm extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      username: '',\n      password: '',\n      passwordConf: '',\n      displayname: '',\n      email: '',\n      usernameError: false,\n      passwordError: false,\n      displaynameError: false,\n      emailError: false\n    }\n  }\n\n  close = () => this.props.hideRegisterForm()\n\n  register = async (event) => {\n    event.preventDefault()\n\n    this.setState({\n      usernameError: false,\n      passwordError: false,\n      displaynameError: false,\n      emailError: false\n    })\n\n    if (this.state.username.length < 6) {\n      await this.setState({ usernameError: true })\n    }\n    if (this.state.password.length < 8 ||\n        this.state.password !== this.state.passwordConf) {\n      await this.setState({ passwordError: true })\n    }\n    if (this.state.displayname.length < 6) {\n      await this.setState({ displaynameError: true })\n    }\n    if (this.state.email.length < 6) {\n      await this.setState({ emailError: true })\n    }\n\n    if (this.state.usernameError ||\n        this.state.passwordError ||\n        this.state.displaynameError ||\n        this.state.emailError) {\n\n      return\n\n    } else {\n      const userObject = {\n        username: this.state.username,\n        password: this.state.password,\n        displayname: this.state.displayname,\n        email: this.state.email\n      }\n\n      try {\n        await loginService.register(userObject)\n        this.props.hideRegisterForm()\n\n      } catch (error) {\n        console.log('Virhe rekisteröinnissä...')\n        console.log(error)\n      }\n    }\n  }\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value })\n  }\n\n  render() {\n    console.log('open ' + this.props.open)\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Rekisteröidy käyttäjäksi</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.register }>\n              <div>\n                Käyttäjätunnus:\n                <Form.Input\n                  type=\"text\"\n                  name=\"username\"\n                  error={ this.state.usernameError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Salasana:\n                <Form.Input\n                  type=\"password\"\n                  name=\"password\"\n                  error={ this.state.passwordError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Salasana uudelleen:\n                <Form.Input\n                  type=\"password\"\n                  name=\"passwordConf\"\n                  error={ this.state.passwordError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Nimimerkki:\n                <Form.Input\n                  type=\"text\"\n                  name=\"displayname\"\n                  error={ this.state.displaynameError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Sähköpostiosoite:\n                <Form.Input\n                  type=\"text\"\n                  name=\"email\"\n                  error={ this.state.emailError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <Button type=\"submit\">\n                Rekisteröidy\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.REGISTERFORM\n  }\n}\n\nconst mapDispatchToProps = {\n  hideRegisterForm\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Route } from 'react-router-dom'\n//import Map from './components/Map'\nimport Map from './components/map/MapContainer'\nimport MenuBar from './components/MenuBar'\nimport HotspotForm from './components/HotspotForm'\nimport Hotspot from './components/Hotspot'\nimport LoginForm from './components/LoginForm'\nimport RegisterForm from './components/RegisterForm'\nimport { initialiseHotspots } from './reducers/hotspotReducer'\nimport { setHotspotsOnMap } from './reducers/mapReducer'\nrequire('leaflet/dist/leaflet.css');\n\nclass App extends React.Component {\n\n  async componentDidMount() {\n    await this.props.initialiseHotspots()\n    if (this.props.hotspots) {\n      console.log(this.props.hotspots)\n      this.props.setHotspotsOnMap(this.props.hotspots)\n    }\n    //TODO: finish or clear\n    //await this.props.initialiseGTKLayers()\n    //await this.prosp.initialiseBaseMapLayers()\n    /*if (this.props.selectedBasemapLayer) {\n      console.log('selectedBasemapLayer: '.this.props.selectedBasemapLayer)\n      this.props.setGTKLayersOnMap(this.props.gtklayers)\n    }*/\n\n  }\n  render() {\n     return (\n      <div>\n        <div>\n          <MenuBar />\n        </div>\n        <div>\n          <Map />\n        </div>\n        <HotspotForm />\n        <Hotspot />\n        <LoginForm />\n        <RegisterForm />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    hotspots: state.hotspot.hotspots\n  }\n}\n\nconst mapDispatchToProps = {\n  initialiseHotspots,\n  setHotspotsOnMap\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport mapReducer from './reducers/mapReducer'\nimport viewReducer from './reducers/viewReducer'\nimport hotspotReducer from './reducers/hotspotReducer'\n//import userReducer from './reducers/userReducer'\n\nconst reducer = combineReducers({\n  map: mapReducer,\n  view: viewReducer,\n  hotspot: hotspotReducer\n})\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools(\n    applyMiddleware(thunk)\n  )\n)\n\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)"],"sourceRoot":""}