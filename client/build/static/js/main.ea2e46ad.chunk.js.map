{"version":3,"sources":["components/map/src/context.js","components/map/src/MapControl.js","components/map/src/AttributionControl.js","components/map/src/MapEvented.js","components/map/src/MapComponent.js","components/map/src/MapLayer.js","components/map/src/Path.js","components/map/src/utils/updateClassName.js","components/map/src/Circle.js","components/map/src/CircleMarker.js","components/map/src/DivOverlay.js","components/map/src/FeatureGroup.js","components/map/src/GeoJSON.js","components/map/src/GridLayer.js","components/map/src/ImageOverlay.js","components/map/src/LayerGroup.js","components/map/src/LayersControl.js","components/map/src/Map.js","components/map/src/Marker.js","components/map/src/Pane.js","components/map/src/Popup.js","components/map/src/Polygon.js","components/map/src/Polyline.js","components/map/src/TileLayer.js","components/map/src/Rectangle.js","components/map/src/ScaleControl.js","components/map/src/Tooltip.js","components/map/src/WMSTileLayer.js","components/map/src/ZoomControl.js","components/map/src/EsriFeatureLayer.js","components/map/src/MapHotspots.js","constants.js","reducers/viewReducer.js","services/hotspotService.js","services/commentService.js","reducers/hotspotReducer.js","components/map/EsriGtkMap.js","components/map/MapContainer.jsx","services/loginService.js","components/MenuBar.js","reducers/mapReducer.js","components/HotspotForm.js","components/Comments.js","components/Togglable.js","components/CommentForm.js","components/Hotspot.js","components/LoginForm.js","components/RegisterForm.js","App.js","store.js","index.js"],"names":["createContext","Consumer","Provider","LeafletProvider","withLeaflet","WrappedComponent","WithLeafletComponent","props","ref","react_default","a","createElement","leaflet","Object","assign","name","displayName","concat","LeafletComponent","forwardRef","hoistNonReactStatics","MapControl","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","leafletElement","createLeafletElement","_props","Error","fromProps","toProps","position","setPosition","addTo","map","prevProps","updateLeafletElement","remove","Component","Control","Attribution","EVENTS_RE","MapEvented","_leafletEvents","extractLeafletEvents","bindLeafletEvents","_prevProps","el","forEach","cb","ev","off","keys","reduce","res","prop","test","replace","match","p","toLowerCase","next","arguments","length","undefined","prev","on","diff","objectSpread","type","data","fire","MapComponent","pane","MapLayer","_fromProps","_toProps","get","prototype","layerContainer","addLayer","attribution","attributionControl","removeAttribution","addAttribution","removeLayer","console","log","children","contextValue","react","value","OPTIONS","Path","popupContainer","setStyleIfChanged","pick","options","setStyle","nextStyle","getPathOptions","isEqual","splitClassName","center","radius","objectWithoutProperties","LeafletCircle","getOptions","setLatLng","setRadius","LeafletCircleMarker","split","filter","Boolean","addClassName","container","className","cls","DomUtil","addClass","removeClassName","removeClass","updateClassName","prevClassName","nextClassName","DivOverlay","onClose","onOpen","forceUpdate","_container","isOpen","update","onRender","_contentNode","createPortal","LeafletFeatureGroup","FeatureGroup","LeafletGeoJSON","style","GridLayer","LeafletGridLayer","opacity","zIndex","setOpacity","setZIndex","maxZoom","minZoom","LeafletImageOverlay","url","bounds","setUrl","setBounds","latLngBounds","LeafletLayerGroup","ControlledLayer","_Component","apply","inherits","createClass","key","_ref","checked","layer","removeLayerControl","BaseLayer","_this$props","addBaseLayer","bind","assertThisInitialized","Overlay","_this2","_this2$props","addOverlay","LayersControlExport","LayersControl","_this3","controlProps","Layers","collapsed","collapse","expand","_this4","setTimeout","_this5","Children","child","cloneElement","OTHER_PROPS","normalizeCenter","pos","Array","isArray","lat","lon","lng","Map","viewport","zoom","_updating","onViewportChange","getCenter","getZoom","onViewportChanged","bindContainer","LeafletMap","animate","boundsOptions","boxZoom","doubleClickZoom","dragging","keyboard","maxBounds","scrollWheelZoom","tap","touchZoom","useFlyTo","c","z","flyTo","setView","shouldUpdateCenter","setZoom","shouldUpdateBounds","setMaxBounds","flyToBounds","fitBounds","enable","disable","omit","whenReady","geocoderOptions","placeholder","errorMessage","showResultIcons","geocoder","L","Geocoder","Nominatim","geocodingQueryParams","accept-language","handleMapClick","latlng","geojsonMarkerOptions","fillColor","color","weight","fillOpacity","hotspotLayer","geoJSON","pointToLayer","feature","circleMarker","addData","hotspots","bringToFront","DomEvent","stopPropagation","handleHotspotClick","clearLayers","preferCanvas","_initEvents","_stop","equals","id","LeafletMarker","icon","setIcon","zIndexOffset","setZIndexOffset","draggable","LEAFLET_PANES","PANE_RE","paneStyles","top","right","bottom","left","Popup","state","context","getPane","createPane","removePane","uniqueId","isDefault","indexOf","isLeafletPane","getParentPane","message","warning","setState","_panes","_paneRenderers","LeafletPolygon","positions","setLatLngs","LeafletPolyline","onPopupOpen","popup","onPopupClose","_ref2","autoPan","_map","_panAnim","_adjustPan","LeafletPopup","_this$props$leaflet","popupopen","popupclose","bindPopup","openOn","defaultProps","LeafletRectangle","Scale","LeafletTileLayer","TileLayer","Tooltip","onTooltipOpen","tooltip","onTooltipClose","LeafletTooltip","tooltipopen","tooltipclose","bindTooltip","unbindTooltip","params","WMS","WMSTileLayer","prevUrl","prevParams","setParams","superOptions","Zoom","featureLayerParams","useCors","esriLayer","featureLayer","properties","metadata","error","e","popupTemplate","hasOwnProperty","Util","template","EsriFeatureLayer","HotspotPopupMarker","content","src_Marker","src_Popup","HotspotMarkersList","items","markers","_ref3","MapHotspots_HotspotPopupMarker","views","dateFormat","year","month","day","hour","minute","initialState","newCoordinates","newLng","newLat","hotspot","showing","previousView","isUserLoggedIn","setUserLoggedIn","loggedIn","dispatch","viewReducer","action","baseUrl","hotspotService","getAll","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","axios","sent","abrupt","stop","getHotspotsByCoordinates","_callee2","_context2","_x","_x2","getHotspot","_callee3","_context3","_x3","create","_ref4","_callee4","_context4","post","withCredentials","_x4","commentService","comment","currentHotspot","newHotspot","hotspotReducer","find","hs","inHotspot","comments","EsriGtkMap","coordinates","showHotspotForm","setCurrentHotspot","showHotspot","Map_Map","src_LayersControl","src_TileLayer","src_EsriFeatureLayer","mapDispatchToProps","connect","view","MapContainer","map_EsriGtkMap","loginService","login","credentials","logout","register","userInfo","MenuBar","Menu","attached","tabular","Container","Item","Dropdown","item","direction","onClick","Icon","paddingLeft","showLoginForm","React","withRouter","geometry","mapReducer","HotspotForm","close","hideHotspotForm","addHotspot","event","hotspotObject","preventDefault","target","title","description","location","addHotspotToMap","open","Modal","closeOnDimmerClick","closeIcon","Header","Content","Form","onSubmit","Input","TextArea","minHeight","Button","t0","Comments","Segment","Date","createdAt","toLocaleDateString","addedBy","Divider","hidden","as","labelPosition","compact","basic","Label","pointing","upVotes","downVotes","Togglable","toggleVisibility","visible","hideWhenVisible","display","showWhenVisible","buttonLabel","CommentForm","addComment","commentObject","hotspotId","newComment","Hotspot","hideHotspot","components_Togglable","components_CommentForm","components_Comments","LoginForm","history","push","hideLoginForm","username","password","showRegisterForm","RegisterForm","hideRegisterForm","userObject","usernameError","passwordError","displaynameError","emailError","passwordConf","displayname","email","handleChange","defineProperty","onChange","require","App","initialiseHotspots","setHotspotsOnMap","components_MenuBar","map_MapContainer","components_HotspotForm","components_Hotspot","components_LoginForm","components_RegisterForm","hotspotFeatures","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","render","ReactDOM","es","BrowserRouter","src_App","document","getElementById","subscribe"],"mappings":"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","file":"static/js/main.ea2e46ad.chunk.js","sourcesContent":["// @flow\n\nimport hoistNonReactStatics from 'hoist-non-react-statics'\nimport React, {\n  createContext,\n  // $FlowFixMe: import\n  forwardRef,\n  type ComponentType,\n} from 'react'\n\nimport type { LeafletContext } from './types'\n\nconst { Consumer, Provider } = createContext<LeafletContext>({})\n\nexport const LeafletConsumer = Consumer\nexport const LeafletProvider = Provider\n\nexport const withLeaflet = <Props: Object>(\n  WrappedComponent: ComponentType<Props>,\n): ComponentType<$Diff<Props, { leaflet: LeafletContext }>> => {\n  const WithLeafletComponent = (props, ref) => (\n    <Consumer>\n      {(leaflet: LeafletContext) => (\n        <WrappedComponent {...props} leaflet={leaflet} ref={ref} />\n      )}\n    </Consumer>\n  )\n\n  // flowlint-next-line sketchy-null-string:off\n  const name = WrappedComponent.displayName || WrappedComponent.name\n  WithLeafletComponent.displayName = `Leaflet(${name})`\n\n  const LeafletComponent = forwardRef(WithLeafletComponent)\n  hoistNonReactStatics(LeafletComponent, WrappedComponent)\n\n  return LeafletComponent\n}\n","// @flow\n\nimport { Control } from 'leaflet'\nimport { Component } from 'react'\n\nimport type { MapControlProps } from './types'\n\nexport default class MapControl<\n  LeafletElement: Control,\n  Props: MapControlProps,\n> extends Component<Props> {\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(this.props)\n  }\n\n  createLeafletElement(_props: Props): LeafletElement {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props): void {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setPosition(toProps.position)\n    }\n  }\n\n  componentDidMount() {\n    this.leafletElement.addTo(this.props.leaflet.map)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    this.leafletElement.remove()\n  }\n\n  render(): * {\n    return null\n  }\n}\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Attribution\ntype Props = {\n  prefix?: string,\n} & MapControlProps\n\nclass AttributionControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Attribution(props)\n  }\n}\n\nexport default withLeaflet(AttributionControl)\n","// @flow\n\nimport type { Evented } from 'leaflet'\nimport { forEach } from 'lodash'\nimport { Component } from 'react'\n\nexport const EVENTS_RE = /^on(.+)$/i\n\ntype EventHandler = (event: Event) => void\ntype EventsObject = { [key: string]: EventHandler }\n\nexport default class MapEvented<\n  LeafletElement: Evented,\n  Props: Object,\n> extends Component<Props> {\n  _leafletEvents: EventsObject\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this._leafletEvents = this.extractLeafletEvents(props)\n  }\n\n  componentDidMount() {\n    this.bindLeafletEvents(this._leafletEvents)\n  }\n\n  componentDidUpdate(_prevProps: Props) {\n    this._leafletEvents = this.bindLeafletEvents(\n      this.extractLeafletEvents(this.props),\n      this._leafletEvents,\n    )\n  }\n\n  componentWillUnmount() {\n    const el = this.leafletElement\n    if (!el) return\n\n    forEach(this._leafletEvents, (cb, ev) => {\n      el.off(ev, cb)\n    })\n  }\n\n  extractLeafletEvents(props: Props): EventsObject {\n    return Object.keys(props).reduce((res, prop) => {\n      if (EVENTS_RE.test(prop)) {\n        if (props[prop] != null) {\n          const key = prop.replace(EVENTS_RE, (match, p) => p.toLowerCase())\n          res[key] = props[prop]\n        }\n      }\n      return res\n    }, {})\n  }\n\n  bindLeafletEvents(\n    next: EventsObject = {},\n    prev: EventsObject = {},\n  ): EventsObject {\n    const el = this.leafletElement\n    if (el == null || el.on == null) return {}\n\n    const diff = { ...prev }\n    forEach(prev, (cb, ev) => {\n      if (next[ev] == null || cb !== next[ev]) {\n        delete diff[ev]\n        el.off(ev, cb)\n      }\n    })\n\n    forEach(next, (cb, ev) => {\n      if (prev[ev] == null || cb !== prev[ev]) {\n        diff[ev] = cb\n        el.on(ev, cb)\n      }\n    })\n\n    return diff\n  }\n\n  fireLeafletEvent(type: string, data: ?any) {\n    const el = this.leafletElement\n    if (el) el.fire(type, data)\n  }\n}\n","// @flow\n\nimport MapEvented from './MapEvented'\nimport type { MapComponentProps } from './types'\n\nexport default class MapComponent<\n  LeafletElement,\n  Props: MapComponentProps,\n> extends MapEvented<LeafletElement, Props> {\n  getOptions(props: Props): Props {\n    if (props.pane != null) {\n      return props\n    }\n    if (props.leaflet != null && props.leaflet.pane != null) {\n      return { ...props, pane: props.leaflet.pane }\n    }\n    return props\n  }\n}\n","// @flow\n\nimport type { Layer } from 'leaflet'\nimport React, { Fragment } from 'react'\n\nimport { LeafletProvider } from './context'\nimport MapComponent from './MapComponent'\nimport type { LeafletContext, MapLayerProps } from './types'\n\n//MapLayer wraps the leaflet Layer, which is parent to EsriFeatureLayer / L.esri.FeatureLayer\nexport default class MapLayer<\n  LeafletElement: Layer,\n  Props: MapLayerProps,\n> extends MapComponent<LeafletElement, Props> {\n  contextValue: ?LeafletContext\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n  }\n\n  get layerContainer(): Layer {\n    return this.props.leaflet.layerContainer || this.props.leaflet.map\n  }\n\n  createLeafletElement(_props: Props): LeafletElement {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(_fromProps: Props, _toProps: Props) {}\n\n  componentDidMount() {\n    //console.log('MapLayer: componentDidMount', this)\n    super.componentDidMount()\n    this.layerContainer.addLayer(this.leafletElement)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    super.componentDidUpdate(prevProps)\n\n    if (this.props.attribution !== prevProps.attribution) {\n      const { map } = this.props.leaflet\n      if (map != null && map.attributionControl != null) {\n        map.attributionControl.removeAttribution(prevProps.attribution)\n        map.attributionControl.addAttribution(this.props.attribution)\n      }\n    }\n\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount()\n    this.layerContainer.removeLayer(this.leafletElement)\n  }\n\n  render() {\n    console.log('MapLayer: render')\n    const { children } = this.props\n    if (children == null) {\n      return null\n    }\n    return this.contextValue == null ? (\n      <Fragment>{children}</Fragment>\n    ) : (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    )\n  }\n}\n","// @flow\n\nimport type { Path as PathType } from 'leaflet'\nimport { isEqual, pick } from 'lodash'\n\nimport MapLayer from './MapLayer'\nimport type { PathOptions, PathProps } from './types'\n\nconst OPTIONS = [\n  'stroke',\n  'color',\n  'weight',\n  'opacity',\n  'lineCap',\n  'lineJoin',\n  'dashArray',\n  'dashOffset',\n  'fill',\n  'fillColor',\n  'fillOpacity',\n  'fillRule',\n  'bubblingMouseEvents',\n  'renderer',\n  'className',\n  // Interactive Layer\n  'interactive',\n  // Layer\n  'pane',\n  'attribution',\n]\n\nexport default class Path<\n  LeafletElement: PathType,\n  Props: PathProps,\n> extends MapLayer<LeafletElement, Props> {\n  leafletElement: LeafletElement\n\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n    if (this.contextValue == null) {\n      this.contextValue = {\n        ...props.leaflet,\n        popupContainer: this.leafletElement,\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    super.componentDidUpdate(prevProps)\n    this.setStyleIfChanged(prevProps, this.props)\n  }\n\n  getPathOptions(props: Props): PathOptions {\n    return pick(props, OPTIONS)\n  }\n\n  setStyle(options: PathOptions = {}) {\n    this.leafletElement.setStyle(options)\n  }\n\n  setStyleIfChanged(fromProps: Props, toProps: Props) {\n    const nextStyle = this.getPathOptions(toProps)\n    if (!isEqual(nextStyle, this.getPathOptions(fromProps))) {\n      this.setStyle(nextStyle)\n    }\n  }\n}\n","// @flow\n\nimport { DomUtil } from 'leaflet'\n\nconst splitClassName = (className: string = ''): Array<string> => {\n  return className.split(' ').filter(Boolean)\n}\n\nexport const addClassName = (container: HTMLElement, className: string) => {\n  splitClassName(className).forEach(cls => {\n    DomUtil.addClass(container, cls)\n  })\n}\n\nexport const removeClassName = (container: HTMLElement, className: string) => {\n  splitClassName(className).forEach(cls => {\n    DomUtil.removeClass(container, cls)\n  })\n}\n\nexport default (\n  container: ?HTMLElement,\n  prevClassName: ?string,\n  nextClassName: ?string,\n) => {\n  if (container != null && nextClassName !== prevClassName) {\n    if (prevClassName != null && prevClassName.length > 0) {\n      removeClassName(container, prevClassName)\n    }\n    if (nextClassName != null && nextClassName.length > 0) {\n      addClassName(container, nextClassName)\n    }\n  }\n}\n","// @flow\n\nimport { Circle as LeafletCircle } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, MapLayerProps, PathOptions } from './types'\n\ntype LeafletElement = LeafletCircle\ntype Props = {\n  center: LatLng,\n  radius: number,\n} & MapLayerProps &\n  PathOptions &\n  Object\n\nclass Circle extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const { center, radius, ...options } = props\n    return new LeafletCircle(center, radius, this.getOptions(options))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.center !== fromProps.center) {\n      this.leafletElement.setLatLng(toProps.center)\n    }\n    if (toProps.radius !== fromProps.radius) {\n      this.leafletElement.setRadius(toProps.radius)\n    }\n  }\n}\n\nexport default withLeaflet(Circle)\n","// @flow\n\nimport { CircleMarker as LeafletCircleMarker } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletCircleMarker\ntype Props = {\n  center: LatLng,\n  radius: number,\n} & PathProps\n\nclass CircleMarker extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletCircleMarker(props.center, this.getOptions(props))\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.center !== fromProps.center) {\n      this.leafletElement.setLatLng(toProps.center)\n    }\n    if (toProps.radius !== fromProps.radius) {\n      this.leafletElement.setRadius(toProps.radius)\n    }\n  }\n}\n\nexport default withLeaflet(CircleMarker)\n","// @flow\n\nimport { createPortal } from 'react-dom'\n\nimport MapComponent from './MapComponent'\nimport updateClassName from './utils/updateClassName'\nimport type { DivOverlayProps } from './types'\n\ntype DivOverlayTypes = {\n  _container: HTMLDivElement,\n  _contentNode: HTMLDivElement,\n  isOpen: () => boolean,\n  update: () => void,\n}\n\nexport default class DivOverlay<\n  LeafletElement,\n  Props: DivOverlayProps,\n> extends MapComponent<LeafletElement & DivOverlayTypes, Props> {\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n  }\n\n  createLeafletElement(_props: Props) {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(_prevProps: Props, _props: Props) {}\n\n  componentDidUpdate(prevProps: Props) {\n    updateClassName(\n      this.leafletElement._container,\n      prevProps.className,\n      this.props.className,\n    )\n\n    this.updateLeafletElement(prevProps, this.props)\n\n    if (this.leafletElement.isOpen()) {\n      this.leafletElement.update()\n      this.onRender()\n    }\n  }\n\n  onClose = () => {\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  onOpen = () => {\n    this.forceUpdate() // Re-render now that leafletElement is created\n    if (this.props.onOpen) {\n      this.props.onOpen()\n    }\n  }\n\n  onRender() {}\n\n  render() {\n    if (this.leafletElement._contentNode) {\n      return createPortal(this.props.children, this.leafletElement._contentNode)\n    }\n    return null\n  }\n}\n","// @flow\n\nimport { FeatureGroup as LeafletFeatureGroup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { PathProps } from './types'\n\ntype LeafletElement = LeafletFeatureGroup\ntype Props = PathProps\n\nclass FeatureGroup extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletFeatureGroup(this.getOptions(props))\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: el,\n      popupContainer: el,\n    }\n    return el\n  }\n\n  componentDidMount() {\n    super.componentDidMount()\n    this.setStyle(this.props)\n  }\n}\n\nexport default withLeaflet(FeatureGroup)\n","// @flow\n\nimport { GeoJSON as LeafletGeoJSON, type LatLng, type Layer } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { PathProps } from './types'\nconsole.log('GeoJSON class component')\ntype LeafletElement = LeafletGeoJSON\n\ntype GeoJSONdata = Object | Array<any>\n\ntype Props = {\n  data: GeoJSONdata,\n  pointToLayer?: (point: GeoJSONdata, latlng: LatLng) => Layer,\n  style?: (feature: GeoJSONdata) => Object,\n  onEachFeature?: (feature: GeoJSONdata, layer: Layer) => void,\n  filter?: (feature: GeoJSONdata) => boolean,\n  coordsToLatLng?: (coords: GeoJSONdata) => LatLng,\n} & PathProps\n\nclass GeoJSON extends Path<LeafletElement, Props> {\n\n  createLeafletElement(props: Props): LeafletElement {\n    //näitä ei näköjään ajeta! miksei?!\n    console.log('GeoJSON createLeafletElement, props.data', props.data)\n    console.log('GeoJSON createLeafletElement, this.getOptions(props)', this.getOptions(props))\n    return new LeafletGeoJSON(props.data, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    console.log('GeoJSON updateLeafletElement fromProps', fromProps)\n    console.log('GeoJSON updateLeafletElement toProps', toProps)\n    if (typeof toProps.style === 'function') {\n      this.setStyle(toProps.style)\n    } else {\n      this.setStyleIfChanged(fromProps, toProps)\n    }\n  }\n}\n\nexport default withLeaflet(GeoJSON)\n","// @flow\n\nimport { GridLayer as LeafletGridLayer } from 'leaflet'\n\nimport MapLayer from './MapLayer'\nimport type { GridLayerProps } from './types'\n\nexport default class GridLayer<\n  LeafletElement: LeafletGridLayer,\n  Props: GridLayerProps,\n> extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletGridLayer(this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    const { opacity, zIndex } = toProps\n    if (opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(opacity)\n    }\n    if (zIndex !== fromProps.zIndex) {\n      this.leafletElement.setZIndex(zIndex)\n    }\n  }\n\n  getOptions(props: Props): Props {\n    const options = super.getOptions(props)\n    return props.leaflet.map == null\n      ? options\n      : // $FlowFixMe: object spread type\n        {\n          maxZoom: props.leaflet.map.options.maxZoom,\n          minZoom: props.leaflet.map.options.minZoom,\n          ...options,\n        }\n  }\n\n  render() {\n    return null\n  }\n}\n","// @flow\n\nimport { ImageOverlay as LeafletImageOverlay, latLngBounds } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { LatLngBounds, MapLayerProps } from './types'\n\ntype LeafletElement = LeafletImageOverlay\ntype Props = {\n  attribution?: string,\n  bounds?: LatLngBounds,\n  opacity?: number,\n  url: string | HTMLImageElement,\n  zIndex?: number,\n} & MapLayerProps\n\nclass ImageOverlay extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletImageOverlay(\n      props.url,\n      props.bounds,\n      this.getOptions(props),\n    )\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.url !== fromProps.url) {\n      this.leafletElement.setUrl(toProps.url)\n    }\n    if (toProps.bounds !== fromProps.bounds) {\n      this.leafletElement.setBounds(latLngBounds(toProps.bounds))\n    }\n    if (toProps.opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(toProps.opacity)\n    }\n    if (toProps.zIndex !== fromProps.zIndex) {\n      this.leafletElement.setZIndex(toProps.zIndex)\n    }\n  }\n}\n\nexport default withLeaflet(ImageOverlay)\n","// @flow\n\nimport { LayerGroup as LeafletLayerGroup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { MapLayerProps } from './types'\n\nclass LayerGroup<\n  LeafletElement: LeafletLayerGroup,\n  Props: MapLayerProps,\n> extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletLayerGroup(this.getOptions(props))\n    this.contextValue = { ...props.leaflet, layerContainer: el }\n    return el\n  }\n}\n\nexport default withLeaflet(LayerGroup)\n","// @flow\n\nimport { Control, type Layer } from 'leaflet'\nimport React, {\n  cloneElement,\n  Component,\n  Children,\n  Fragment,\n  type ChildrenArray,\n  type Element,\n} from 'react'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type {\n  AddLayerHandler,\n  RemoveLayerHandler,\n  LeafletContext,\n  MapControlProps,\n} from './types'\n\ntype ControlledLayerProps = {\n  addBaseLayer: AddLayerHandler,\n  addOverlay: AddLayerHandler,\n  checked?: boolean,\n  children: Element<*>,\n  leaflet: LeafletContext,\n  name: string,\n  removeLayer: RemoveLayerHandler,\n  removeLayerControl: RemoveLayerHandler,\n}\n\n// Abtract class for layer container, extended by BaseLayer and Overlay\nexport class ControlledLayer extends Component<ControlledLayerProps> {\n  contextValue: LeafletContext\n  layer: ?Layer\n\n  componentDidUpdate({ checked }: ControlledLayerProps) {\n    if (this.props.leaflet.map == null) {\n      return\n    }\n    // Handle dynamically (un)checking the layer => adding/removing from the map\n    if (this.props.checked === true && (checked == null || checked === false)) {\n      this.props.leaflet.map.addLayer(this.layer)\n    } else if (\n      checked === true &&\n      (this.props.checked == null || this.props.checked === false)\n    ) {\n      this.props.leaflet.map.removeLayer(this.layer)\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeLayerControl(this.layer)\n  }\n\n  addLayer() {\n    throw new Error('Must be implemented in extending class')\n  }\n\n  removeLayer(layer: Layer) {\n    this.props.removeLayer(layer)\n  }\n\n  render() {\n    const { children } = this.props\n    return children ? (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    ) : null\n  }\n}\n\nclass BaseLayer extends ControlledLayer {\n  constructor(props: ControlledLayerProps) {\n    super(props)\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: {\n        addLayer: this.addLayer.bind(this),\n        removeLayer: this.removeLayer.bind(this),\n      },\n    }\n  }\n\n  addLayer = (layer: Layer) => {\n    this.layer = layer // Keep layer reference to handle dynamic changes of props\n    const { addBaseLayer, checked, name } = this.props\n    addBaseLayer(layer, name, checked)\n  }\n}\n\nclass Overlay extends ControlledLayer {\n  constructor(props: ControlledLayerProps) {\n    super(props)\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: {\n        addLayer: this.addLayer.bind(this),\n        removeLayer: this.removeLayer.bind(this),\n      },\n    }\n  }\n\n  addLayer = (layer: Layer) => {\n    this.layer = layer // Keep layer reference to handle dynamic changes of props\n    const { addOverlay, checked, name } = this.props\n    addOverlay(layer, name, checked)\n  }\n}\n\ntype LeafletElement = Control.Layers\ntype LayersControlProps = {\n  children: ChildrenArray<*>,\n  collapsed?: boolean,\n} & MapControlProps\n\nclass LayersControl extends MapControl<LeafletElement, LayersControlProps> {\n  controlProps: {\n    addBaseLayer: AddLayerHandler,\n    addOverlay: AddLayerHandler,\n    removeLayer: RemoveLayerHandler,\n    removeLayerControl: RemoveLayerHandler,\n  }\n\n  constructor(props: LayersControlProps) {\n    super(props)\n    this.controlProps = {\n      addBaseLayer: this.addBaseLayer.bind(this),\n      addOverlay: this.addOverlay.bind(this),\n      leaflet: props.leaflet,\n      removeLayer: this.removeLayer.bind(this),\n      removeLayerControl: this.removeLayerControl.bind(this),\n    }\n  }\n\n  createLeafletElement(props: LayersControlProps): LeafletElement {\n    const { children: _children, ...options } = props\n    return new Control.Layers(undefined, undefined, options)\n  }\n\n  updateLeafletElement(\n    fromProps: LayersControlProps,\n    toProps: LayersControlProps,\n  ) {\n    super.updateLeafletElement(fromProps, toProps)\n    if (toProps.collapsed !== fromProps.collapsed) {\n      if (toProps.collapsed === true) {\n        this.leafletElement.collapse()\n      } else {\n        this.leafletElement.expand()\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    setTimeout(() => {\n      super.componentWillUnmount()\n    }, 0)\n  }\n\n  addBaseLayer(layer: Layer, name: string, checked: boolean = false) {\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer)\n    }\n    this.leafletElement.addBaseLayer(layer, name)\n  }\n\n  addOverlay(layer: Layer, name: string, checked: boolean = false) {\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer)\n    }\n    this.leafletElement.addOverlay(layer, name)\n  }\n\n  removeLayer(layer: Layer) {\n    if (this.props.leaflet.map != null) {\n      this.props.leaflet.map.removeLayer(layer)\n    }\n  }\n\n  removeLayerControl(layer: Layer) {\n    this.leafletElement.removeLayer(layer)\n  }\n\n  render() {\n    const children = Children.map(this.props.children, child => {\n      return child ? cloneElement(child, this.controlProps) : null\n    })\n    return <Fragment>{children}</Fragment>\n  }\n}\n\nconst LayersControlExport: Object = withLeaflet(LayersControl)\n\nLayersControlExport.BaseLayer = BaseLayer\nLayersControlExport.Overlay = Overlay\n\nexport default LayersControlExport\n","// @flow\n\nimport {\n  latLngBounds,\n  Map as LeafletMap,\n  type CRS,\n  type Renderer,\n} from 'leaflet'\nimport { geoJSON, circleMarker, DomEvent, polygon } from 'leaflet'\nimport { L } from 'leaflet-control-geocoder'\nimport { omit } from 'lodash'\nimport React, { type Node } from 'react'\n\nimport { LeafletProvider } from './context'\nimport MapEvented from './MapEvented'\nimport updateClassName from './utils/updateClassName'\nimport type\n {\n  LatLng,\n  LatLngBounds,\n  LeafletContext,\n  Point,\n  Viewport,\n} from './types'\n\nconst OTHER_PROPS = [\n  'children',\n  'className',\n  'id',\n  'style',\n  'useFlyTo',\n  'whenReady'\n]\n\nconst normalizeCenter = (pos: LatLng): [number, number] => {\n  return Array.isArray(pos)\n    ? [pos[0], pos[1]]\n    : [pos.lat, pos.lon ? pos.lon : pos.lng]\n}\n\ntype LeafletElement = LeafletMap\n\ntype ZoomOption = boolean | 'center'\ntype Props = {\n  [key: string]: any,\n  // Leaflet options\n  preferCanvas?: boolean,\n  attributionControl?: boolean,\n  zoomControl?: boolean,\n  closePopupOnClick?: boolean,\n  zoomSnap?: number,\n  zoomDelta?: number,\n  trackResize?: boolean,\n  boxZoom?: boolean,\n  doubleClickZoom?: ZoomOption,\n  dragging?: boolean,\n  crs?: CRS,\n  center?: LatLng,\n  zoom?: number,\n  minZoom?: number,\n  maxZoom?: number,\n  maxBounds?: LatLngBounds,\n  renderer?: Renderer,\n  zoomAnimation?: boolean,\n  zoomAnimationThreshold?: number,\n  fadeAnimation?: boolean,\n  markerZoomAnimation?: boolean,\n  transform3DLimit?: number,\n  inertia?: boolean,\n  inertiaDeceleration?: number,\n  inertiaMaxSpeed?: number,\n  easeLinearity?: number,\n  worldCopyJump?: boolean,\n  maxBoundsViscosity?: number,\n  keyboard?: boolean,\n  keyboardPanDelta?: number,\n  scrollWheelZoom?: ZoomOption,\n  wheelDebounceTime?: number,\n  wheelPxPerZoomLevel?: number,\n  tap?: boolean,\n  tapTolerance?: number,\n  touchZoom?: ZoomOption,\n  bounceAtZoomLimits?: boolean,\n  // Additional options\n  animate?: boolean,\n  bounds?: LatLngBounds,\n  boundsOptions?: {\n    paddingTopLeft?: Point,\n    paddingBottomRight?: Point,\n    padding?: Point,\n    maxZoom?: number,\n  },\n  children: Node,\n  className?: string,\n  id?: string,\n  style?: Object,\n  useFlyTo?: boolean,\n  viewport?: Viewport,\n  whenReady?: () => void,\n}\n\nexport default class Map extends MapEvented<LeafletElement, Props> {\n  className: ?string\n  contextValue: ?LeafletContext\n  container: ?HTMLDivElement\n  viewport: Viewport = {\n    center: undefined,\n    zoom: undefined,\n  }\n\n  _updating: boolean = false\n\n  constructor(props: Props) {\n    super(props)\n    console.log('props:', props)\n    this.className = props.className\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    const { viewport, ...options } = props\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center\n      }\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom\n      }\n    }\n    return new LeafletMap(this.container, options)\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    this._updating = true\n\n    const {\n      animate,\n      bounds,\n      boundsOptions,\n      boxZoom,\n      center,\n      className,\n      doubleClickZoom,\n      dragging,\n      keyboard,\n      maxBounds,\n      scrollWheelZoom,\n      tap,\n      touchZoom,\n      useFlyTo,\n      viewport,\n      zoom,\n    } = toProps\n\n    updateClassName(this.container, fromProps.className, className)\n\n    if (viewport && viewport !== fromProps.viewport) {\n      const c = viewport.center ? viewport.center : center\n      const z = viewport.zoom == null ? zoom : viewport.zoom\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, { animate })\n      } else {\n        this.leafletElement.setView(c, z, { animate })\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, { animate })\n      } else {\n        this.leafletElement.setView(center, zoom, { animate })\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom)\n      } else {\n        this.leafletElement.setZoom(zoom)\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds)\n    }\n\n    if (\n      bounds &&\n      (this.shouldUpdateBounds(bounds, fromProps.bounds) ||\n        boundsOptions !== fromProps.boundsOptions)\n    ) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, boundsOptions)\n      } else {\n        this.leafletElement.fitBounds(bounds, boundsOptions)\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable()\n      } else {\n        this.leafletElement.boxZoom.disable()\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true) {\n        this.leafletElement.doubleClickZoom.enable()\n      } else {\n        this.leafletElement.doubleClickZoom.disable()\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable()\n      } else {\n        this.leafletElement.dragging.disable()\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable()\n      } else {\n        this.leafletElement.keyboard.disable()\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom\n        this.leafletElement.scrollWheelZoom.enable()\n      } else {\n        this.leafletElement.scrollWheelZoom.disable()\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable()\n      } else {\n        this.leafletElement.tap.disable()\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom\n        this.leafletElement.touchZoom.enable()\n      } else {\n        this.leafletElement.touchZoom.disable()\n      }\n    }\n\n    this._updating = false\n  }\n\n  onViewportChange = () => {\n    const center = this.leafletElement.getCenter()\n    this.viewport = {\n      center: center ? [center.lat, center.lng] : undefined,\n      zoom: this.leafletElement.getZoom(),\n    }\n    if (this.props.onViewportChange && !this._updating) {\n      this.props.onViewportChange(this.viewport)\n    }\n  }\n\n  onViewportChanged = () => {\n    if (this.props.onViewportChanged && !this._updating) {\n      this.props.onViewportChanged(this.viewport)\n    }\n  }\n\n  componentDidMount() {\n    const props = omit(this.props, OTHER_PROPS)\n    this.leafletElement = this.createLeafletElement(props)\n\n    this.leafletElement.on('move', this.onViewportChange)\n    this.leafletElement.on('moveend', this.onViewportChanged)\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, props.boundsOptions)\n    }\n\n    if (this.props.whenReady) {\n      this.leafletElement.whenReady(this.props.whenReady)\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement,\n    }\n\n    const geocoderOptions = {\n      placeholder: 'Etsi...',\n      errorMessage: 'Ei kohteita.',\n      showResultIcons: true,\n      //defaultMarkGeocode: false,\n      position: 'topleft',\n      geocoder: new L.Control.Geocoder.Nominatim({\n        geocodingQueryParams: {\n          'accept-language': 'fi'\n        }\n      })\n    }\n    new L.Control.Geocoder(geocoderOptions)\n      .addTo(this.contextValue.map)\n\n    this.contextValue.map.on('click', function(ev) {\n      props.handleMapClick([ ev.latlng.lng, ev.latlng.lat ])\n      console.log('props2', props)\n      //alert(ev.latlng); // ev is an event object (MouseEvent in this case)\n    })\n\n    var geojsonMarkerOptions = {\n      radius: 8,\n      fillColor: 'darkorange',\n      color: 'black',\n      weight: 1,\n      opacity: 1,\n      fillOpacity: 0.8\n    }\n\n    this.hotspotLayer = geoJSON([], {\n      pointToLayer: function (feature, latlng) {\n        return circleMarker(latlng, geojsonMarkerOptions)\n      }}).addTo(this.contextValue.map)\n\n    this.hotspotLayer.addData(props.hotspots)\n    this.hotspotLayer.bringToFront()\n\n    this.hotspotLayer.on('click', function(ev) {\n      DomEvent.stopPropagation(ev)\n      props.handleHotspotClick(ev)\n    })\n\n    super.componentDidMount()\n    this.forceUpdate() // Re-render now that leafletElement is created\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    console.log('updated?: ',this.props.hotspots)\n    this.hotspotLayer.clearLayers()\n    this.hotspotLayer.addData(this.props.hotspots)\n    this.updateLeafletElement(prevProps, this.props)\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount()\n\n    this.leafletElement.off('move', this.onViewportChange)\n    this.leafletElement.off('moveend', this.onViewportChanged)\n\n    // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true)\n      this.leafletElement._stop()\n    } else {\n      this.leafletElement.remove()\n    }\n  }\n\n  bindContainer = (container: ?HTMLDivElement): void => {\n    this.container = container\n  }\n\n  shouldUpdateCenter(next: LatLng, prev: LatLng) {\n    if (!prev) return true\n    next = normalizeCenter(next)\n    prev = normalizeCenter(prev)\n    return next[0] !== prev[0] || next[1] !== prev[1]\n  }\n\n  shouldUpdateBounds(next: LatLngBounds, prev: LatLngBounds) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true\n  }\n\n  render() {\n    return (\n      <div\n        className={this.className}\n        id={this.props.id}\n        ref={this.bindContainer}\n        style={this.props.style}>\n        {this.contextValue ? (\n          <LeafletProvider value={this.contextValue}>\n            {this.props.children}\n          </LeafletProvider>\n        ) : null}\n      </div>\n    )\n  }\n}","// @flow\n\nimport { type Icon, Marker as LeafletMarker } from 'leaflet'\nimport React from 'react'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport MapLayer from './MapLayer'\nimport type { LatLng, MapLayerProps } from './types'\n\ntype LeafletElement = LeafletMarker\ntype Props = {\n  icon?: Icon,\n  draggable?: boolean,\n  opacity?: number,\n  position: LatLng,\n  zIndexOffset?: number,\n} & MapLayerProps\n\nclass Marker extends MapLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const el = new LeafletMarker(props.position, this.getOptions(props))\n    this.contextValue = { ...props.leaflet, popupContainer: el }\n    return el\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setLatLng(toProps.position)\n    }\n    if (toProps.icon !== fromProps.icon) {\n      this.leafletElement.setIcon(toProps.icon)\n    }\n    if (toProps.zIndexOffset !== fromProps.zIndexOffset) {\n      this.leafletElement.setZIndexOffset(toProps.zIndexOffset)\n    }\n    if (toProps.opacity !== fromProps.opacity) {\n      this.leafletElement.setOpacity(toProps.opacity)\n    }\n    if (toProps.draggable !== fromProps.draggable) {\n      if (toProps.draggable === true) {\n        this.leafletElement.dragging.enable()\n      } else {\n        this.leafletElement.dragging.disable()\n      }\n    }\n  }\n\n  render() {\n    const { children } = this.props\n    return children == null || this.contextValue == null ? null : (\n      <LeafletProvider value={this.contextValue}>{children}</LeafletProvider>\n    )\n  }\n}\n\nexport default withLeaflet(Marker)\n","// @flow\n// flowlint sketchy-null-string:off\n\nimport { forEach, omit, uniqueId } from 'lodash'\nimport React, { Component, type Node } from 'react'\nimport warning from 'warning'\n\nimport { LeafletProvider, withLeaflet } from './context'\nimport type { LeafletContext } from './types'\nimport { addClassName, removeClassName } from './utils/updateClassName'\n\nconst LEAFLET_PANES = [\n  'tile',\n  'shadow',\n  'overlay',\n  'map',\n  'marker',\n  'tooltip',\n  'popup',\n]\n\nconst PANE_RE = /-*pane/gi\n\nconst isLeafletPane = (name: string): boolean => {\n  return LEAFLET_PANES.indexOf(name.replace(PANE_RE, '')) !== -1\n}\n\nconst paneStyles = {\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n}\n\ntype Props = {\n  children: Node,\n  className?: string,\n  leaflet: LeafletContext,\n  name?: string,\n  pane?: string,\n  style?: Object,\n}\n\ntype State = {\n  name: ?string,\n  context: ?LeafletContext,\n}\n\nclass Pane extends Component<Props, State> {\n  state = {\n    name: undefined,\n    context: undefined,\n  }\n\n  componentDidMount() {\n    this.createPane(this.props)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!this.state.name) {\n      // Do nothing if this.state.name is undefined due to errors or\n      // an invalid props.name value\n      return\n    }\n\n    // If the 'name' prop has changed the current pane is unmounted and a new\n    // pane is created.\n    if (this.props.name !== prevProps.name) {\n      this.removePane()\n      this.createPane(this.props)\n    } else {\n      // Remove the previous css class name from the pane if it has changed.\n      // setStyle() will take care of adding in the updated className\n      if (prevProps.className && this.props.className !== prevProps.className) {\n        const pane = this.getPane(this.state.name)\n        if (pane != null && prevProps.className != null) {\n          removeClassName(pane, prevProps.className)\n        }\n      }\n\n      // Update the pane's DOM node style and class\n      this.setStyle(this.props)\n    }\n  }\n\n  componentWillUnmount() {\n    this.removePane()\n  }\n\n  createPane(props: Props) {\n    const { map } = props.leaflet\n    const name = props.name || `pane-${uniqueId()}`\n\n    if (map != null && map.createPane != null) {\n      const isDefault = isLeafletPane(name)\n      const existing = isDefault || this.getPane(name)\n\n      if (existing == null) {\n        map.createPane(name, this.getParentPane())\n      } else {\n        const message = isDefault\n          ? `You must use a unique name for a pane that is not a default leaflet pane (${name})`\n          : `A pane with this name already exists. (${name})`\n        warning(false, message)\n      }\n\n      this.setState(\n        { name, context: { ...props.leaflet, pane: name } },\n        this.setStyle,\n      )\n    }\n  }\n\n  removePane() {\n    // Remove the created pane\n    const { name } = this.state\n    if (name != null) {\n      const pane = this.getPane(name)\n      if (pane != null && pane.remove) pane.remove()\n\n      const { map } = this.props.leaflet\n      if (map != null && map._panes != null) {\n        map._panes = omit(map._panes, name)\n        map._paneRenderers = omit(map._paneRenderers, name)\n      }\n    }\n  }\n\n  setStyle = ({ style, className }: Props = this.props) => {\n    const pane = this.getPane(this.state.name)\n    if (pane) {\n      if (className) {\n        addClassName(pane, className)\n      }\n      if (style) {\n        forEach(style, (value, key) => {\n          pane.style[key] = value\n        })\n      }\n    }\n  }\n\n  getParentPane(): ?HTMLElement {\n    return this.getPane(this.props.pane || this.props.leaflet.pane)\n  }\n\n  getPane(name: ?string): ?HTMLElement {\n    if (name != null && this.props.leaflet.map != null) {\n      return this.props.leaflet.map.getPane(name)\n    }\n  }\n\n  render() {\n    const { context } = this.state\n    return context ? (\n      <LeafletProvider value={context}>\n        <div style={paneStyles}>{this.props.children}</div>\n      </LeafletProvider>\n    ) : null\n  }\n}\n\nexport default withLeaflet(Pane)\n","// @flow\n\nimport { Popup as LeafletPopup } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport DivOverlay from './DivOverlay'\nimport type { LatLng, DivOverlayProps } from './types'\n\ntype LeafletElement = LeafletPopup\ntype Props = {\n  autoPan?: boolean,\n  position?: LatLng,\n} & DivOverlayProps\n\nclass Popup extends DivOverlay<LeafletElement, Props> {\n  static defaultProps = {\n    pane: 'popupPane',\n  }\n\n  getOptions(props: Props): Props {\n    return {\n      ...super.getOptions(props),\n      autoPan: false,\n    }\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    const options = this.getOptions(props)\n    options.autoPan = props.autoPan !== false\n    return new LeafletPopup(options, props.leaflet.popupContainer)\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.position !== fromProps.position) {\n      this.leafletElement.setLatLng(toProps.position)\n    }\n  }\n\n  componentDidMount() {\n    const { position } = this.props\n    const { map, popupContainer } = this.props.leaflet\n    const el = this.leafletElement\n\n    if (map != null) {\n      map.on({\n        popupopen: this.onPopupOpen,\n        popupclose: this.onPopupClose,\n      })\n    }\n\n    if (popupContainer) {\n      // Attach to container component\n      popupContainer.bindPopup(el)\n    } else {\n      // Attach to a Map\n      if (position) {\n        el.setLatLng(position)\n      }\n      el.openOn(map)\n    }\n  }\n\n  componentWillUnmount() {\n    const { map } = this.props.leaflet\n\n    if (map != null) {\n      map.off({\n        popupopen: this.onPopupOpen,\n        popupclose: this.onPopupClose,\n      })\n      map.removeLayer(this.leafletElement)\n    }\n\n    super.componentWillUnmount()\n  }\n\n  onPopupOpen = ({ popup }: { popup: LeafletElement }) => {\n    if (popup === this.leafletElement) {\n      this.onOpen()\n    }\n  }\n\n  onPopupClose = ({ popup }: { popup: LeafletElement }) => {\n    if (popup === this.leafletElement) {\n      this.onClose()\n    }\n  }\n\n  onRender = () => {\n    if (this.props.autoPan !== false && this.leafletElement.isOpen()) {\n      if (this.leafletElement._map && this.leafletElement._map._panAnim) {\n        this.leafletElement._map._panAnim = undefined\n      }\n      this.leafletElement._adjustPan()\n    }\n  }\n}\n\nexport default withLeaflet(Popup)\n","// @flow\n\nimport { Polygon as LeafletPolygon } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletPolygon\ntype Props = {\n  positions: LatLng[] | LatLng[][] | LatLng[][][],\n} & PathProps\n\nclass Polygon extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletPolygon(props.positions, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.positions !== fromProps.positions) {\n      this.leafletElement.setLatLngs(toProps.positions)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Polygon)\n","// @flow\n\nimport { Polyline as LeafletPolyline } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLng, PathProps } from './types'\n\ntype LeafletElement = LeafletPolyline\ntype Props = {\n  positions: LatLng[] | LatLng[][],\n} & PathProps\n\nclass Polyline extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletPolyline(props.positions, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.positions !== fromProps.positions) {\n      this.leafletElement.setLatLngs(toProps.positions)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Polyline)\n","// @flow\n\nimport { TileLayer as LeafletTileLayer } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport GridLayer from './GridLayer'\nimport type { GridLayerProps } from './types'\n\ntype LeafletElement = LeafletTileLayer\ntype Props = { url: string } & GridLayerProps\n\nclass TileLayer extends GridLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletTileLayer(props.url, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n    if (toProps.url !== fromProps.url) {\n      this.leafletElement.setUrl(toProps.url)\n    }\n  }\n}\n\nexport default withLeaflet(TileLayer)\n","// @flow\n\nimport { Rectangle as LeafletRectangle } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport Path from './Path'\nimport type { LatLngBounds, PathProps } from './types'\n\ntype LeafletElement = LeafletRectangle\ntype Props = { bounds: LatLngBounds } & PathProps\n\nclass Rectangle extends Path<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletRectangle(props.bounds, this.getOptions(props))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    if (toProps.bounds !== fromProps.bounds) {\n      this.leafletElement.setBounds(toProps.bounds)\n    }\n    this.setStyleIfChanged(fromProps, toProps)\n  }\n}\n\nexport default withLeaflet(Rectangle)\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Scale\ntype Props = {\n  imperial?: boolean,\n  maxWidth?: number,\n  metric?: boolean,\n  updateWhenIdle?: boolean,\n} & MapControlProps\n\nclass ScaleControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Scale(props)\n  }\n}\n\nexport default withLeaflet(ScaleControl)\n","// @flow\n\nimport { Tooltip as LeafletTooltip } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport DivOverlay from './DivOverlay'\nimport type { DivOverlayProps } from './types'\n\ntype LeafletElement = LeafletTooltip\ntype Props = DivOverlayProps\n\nclass Tooltip extends DivOverlay<LeafletElement, Props> {\n  static defaultProps = {\n    pane: 'tooltipPane',\n  }\n\n  createLeafletElement(props: Props): LeafletElement {\n    return new LeafletTooltip(\n      this.getOptions(props),\n      props.leaflet.popupContainer,\n    )\n  }\n\n  componentDidMount() {\n    const { popupContainer } = this.props.leaflet\n    if (popupContainer == null) return\n\n    popupContainer.on({\n      tooltipopen: this.onTooltipOpen,\n      tooltipclose: this.onTooltipClose,\n    })\n    popupContainer.bindTooltip(this.leafletElement)\n  }\n\n  componentWillUnmount() {\n    const { popupContainer } = this.props.leaflet\n    if (popupContainer == null) return\n\n    popupContainer.off({\n      tooltipopen: this.onTooltipOpen,\n      tooltipclose: this.onTooltipClose,\n    })\n    if (popupContainer._map != null) {\n      popupContainer.unbindTooltip(this.leafletElement)\n    }\n  }\n\n  onTooltipOpen = ({ tooltip }: { tooltip: LeafletElement }) => {\n    if (tooltip === this.leafletElement) {\n      this.onOpen()\n    }\n  }\n\n  onTooltipClose = ({ tooltip }: { tooltip: LeafletElement }) => {\n    if (tooltip === this.leafletElement) {\n      this.onClose()\n    }\n  }\n}\n\nexport default withLeaflet(Tooltip)\n","// @flow\n\nimport { TileLayer } from 'leaflet'\nimport { isEqual } from 'lodash'\n\nimport { withLeaflet } from './context'\nimport GridLayer from './GridLayer'\nimport { EVENTS_RE } from './MapEvented'\nimport type { GridLayerProps } from './types'\n\ntype LeafletElement = TileLayer.WMS\ntype Props = { url: string } & GridLayerProps\n\nclass WMSTileLayer extends GridLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const { url, ...params } = props\n    return new TileLayer.WMS(url, this.getOptions(params))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n\n    const { url: prevUrl, opacity: _po, zIndex: _pz, ...prevParams } = fromProps\n    const { url, opacity: _o, zIndex: _z, ...params } = toProps\n\n    if (url !== prevUrl) {\n      this.leafletElement.setUrl(url)\n    }\n    if (!isEqual(params, prevParams)) {\n      this.leafletElement.setParams(params)\n    }\n  }\n\n  getOptions(params: Object): Object {\n    const superOptions = super.getOptions(params)\n    return Object.keys(superOptions).reduce((options, key) => {\n      if (!EVENTS_RE.test(key)) {\n        options[key] = superOptions[key]\n      }\n      return options\n    }, {})\n  }\n}\n\nexport default withLeaflet(WMSTileLayer)\n","// @flow\n\nimport { Control } from 'leaflet'\n\nimport { withLeaflet } from './context'\nimport MapControl from './MapControl'\nimport type { MapControlProps } from './types'\n\ntype LeafletElement = Control.Zoom\ntype Props = {\n  zoomInText?: string,\n  zoomInTitle?: string,\n  zoomOutText?: string,\n  zoomOutTitle?: string,\n} & MapControlProps\n\nclass ZoomControl extends MapControl<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    return new Control.Zoom(props)\n  }\n}\n\nexport default withLeaflet(ZoomControl)\n","// @flow\n\nimport { isEqual } from 'lodash'\nimport { withLeaflet } from './context'\nimport { EVENTS_RE } from './MapEvented'\nimport { Layer } from 'leaflet'\nimport { Util } from 'leaflet'\nimport { get as esriGet } from 'esri-leaflet'\nimport { request as esriRequest } from 'esri-leaflet'\nimport type { EsriFeatureLayerProps } from './types'\nimport type { GridLayerProps } from './types'\nimport { BasemapLayer } from 'esri-leaflet'\nimport { featureLayer } from 'esri-leaflet'\nimport MapLayer from './MapLayer'\n//import { FeatureLayerService } from  'esri-leaflet'\n//import { FeatureManager } from  'esri-leaflet'\n//import GeoJSON from './GeoJSON'\n//import { geoJson } from 'leaflet'\n\ntype LeafletElement = featureLayer\ntype Props = { url: string, color: string } & EsriFeatureLayerProps\n\nclass EsriFeatureLayer extends MapLayer<LeafletElement, Props> {\n\n  createLeafletElement(props: Props): LeafletElement {\n    //console.log('createLeafletElement')\n    const { url, color, ...params } = props\n    //console.log('params from options:')\n    //console.log(this.getOptions(params))\n    //console.log('endof params from options')\n    let featureLayerParams = {\n      \"url\" : url,\n      style: function () {\n        return { color: color, weight: 1 };\n      },\n      \"useCors\" : true\n    }\n\n    var esriLayer = new featureLayer(featureLayerParams)\n\n    /* Testing a single request to a gtk mapserver\n    var serviceUrl = url\n    console.log(\"url\",serviceUrl)\n    esriRequest(\"http://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/12\", {}, function(error, response){\n      if(error){\n        console.log('error', error);\n      } else {\n        console.log('response.name', response.name);\n      }\n    });*/\n\n    esriLayer.on('click', function(ev){\n      console.log('feature layer click event: ',ev)\n    })\n    esriLayer.on('popupopen', function(ev){\n      // get the properties of click popup single feature\n      console.log('popupopen!',ev.layer.feature.properties)\n      return\n    })\n    esriLayer.on('loading', function(ev){\n      console.log('loading feature layer!',ev)\n      return\n    })\n    esriLayer.on('load', function(ev){\n      console.log('loaded all queried feature layers event:',ev)\n      return\n    })\n\n    esriLayer.metadata(function(error, metadata){\n      //console.log('metadata',metadata);\n    });\n\n    esriLayer.bindPopup(function(e){\n      var popupTemplate = \"\"\n      for(let key in e.feature.properties){\n        if (e.feature.properties.hasOwnProperty(key)) {\n          if(key.indexOf(\".\")===-1){\n            popupTemplate+=key+\" {\"+key+\"} <br />\"\n          }\n          else{\n            //the json object keys need to be renamed as well.. if the problem with template is about \".\" in json structure\n            key = key.replace(\".\",\"_\")\n          }\n          //console.log(key + \" -> \" + e.feature.properties[key]);\n        }\n      }\n      //devnote: we could change the template into semantic UI's modal\n      return Util.template(popupTemplate, e.feature.properties)\n    });\n    return esriLayer\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n    const { url: prevUrl, opacity: _po, zIndex: _pz, ...prevParams } = fromProps\n    const { url, opacity: _o, zIndex: _z, ...params } = toProps\n\n    if (url !== prevUrl) {\n      this.leafletElement.setUrl(url)\n    }\n    if (!isEqual(params, prevParams)) {\n      this.leafletElement.setParams(params)\n    }\n  }\n\n  getOptions(params: Object): Object {\n    const superOptions = super.getOptions(params)\n    return Object.keys(superOptions).reduce((options, key) => {\n      if (!EVENTS_RE.test(key)) {\n        options[key] = superOptions[key]\n      }\n      return options\n    }, {})\n  }\n}\n\nexport default withLeaflet(EsriFeatureLayer)\n","// @flow\n\nimport React, { Component, Fragment } from 'react'\nimport { Map } from './Map'\nimport TileLayer  from './TileLayer'\nimport Marker  from './Marker'\nimport Popup from './Popup'\n\ntype Position = [number, number]\n\ntype Props = {|\n  content: string,\n  position: Position,\n|}\n\ntype MarkerData = {| ...Props, key: string |}\n\nconst HotspotPopupMarker = ({ content, position }: Props) => (\n  <Marker position={position}>\n    <Popup>{content}</Popup>\n  </Marker>\n)\n\nconst HotspotMarkersList = ({ markers }: { markers: Array<MarkerData> }) => {\n  const items = markers.map(({ key, ...props }) => (\n    <HotspotPopupMarker key={key} {...props} />\n  ))\n  return <Fragment>{items}</Fragment>\n}\n\ntype State = {\n  markers: Array<MarkerData>,\n}\n\nexport default class MapHotspots extends Component<{}, State> {\n  state = {\n    markers: [\n      { key: 'marker1', position: [68.7112, 25.6089], content: 'Lisätty karttakohde 1  Tähän valokuvaa yms. ' },\n      { key: 'marker2', position: [68.7912, 25.6489], content: 'Lisätty karttakohde 2. Tähän valokuvaa yms. ' },\n      { key: 'marker3', position: [68.8512, 25.6889], content: 'Lisätty karttakohde 3. Tähän valokuvaa yms. ' },\n    ],\n  }\n\n  render() {\n    return (\n        <HotspotMarkersList markers={this.state.markers} />\n    )\n  }\n}\n","const views = {\n  MAP: 'MAP',\n  HOTSPOTFORM: 'HOTSPOTFORM',\n  HOTSPOT: 'HOTSPOT',\n  LOGINFORM: 'LOGINFORM',\n  REGISTERFORM: 'REGISTERFORM'\n}\n\nconst dateFormat = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n}\n\nexport { views, dateFormat }","import { views }  from '../constants'\n\nconst initialState = {\n  newCoordinates: [],\n  newLng: 0,\n  newLat: 0,\n  hotspot: null,\n  showing: views.MAP,\n  previousView: views.MAP,\n  isUserLoggedIn: false\n}\n\nconst viewReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SHOW_HOTSPOT_FORM':\n      return {\n        ...state,\n        newCoordinates: action.newCoordinates,\n        showing: views.HOTSPOTFORM\n      }\n    case 'SHOW_MAP':\n      return {\n        ...state,\n        showing: views.MAP\n      }\n    case 'SHOW_PREVIOUS':\n      return {\n        ...state,\n        showing: state.previousView,\n        previousView: views.MAP\n      }\n    case 'SHOW_HOTSPOT':\n      return {\n        ...state,\n        showing: views.HOTSPOT\n      }\n    case 'HIDE_HOTSPOT':\n      return {\n        ...state,\n        showing: views.MAP\n      }\n    case 'SHOW_LOGINFORM':\n      return {\n        ...state,\n        previousView: state.showing,\n        showing: views.LOGINFORM\n      }\n    case 'SHOW_REGISTERFORM':\n      return {\n        ...state,\n        previousView: state.showing,\n        showing: views.REGISTERFORM\n      }\n    case 'SET_USERLOGGEDIN':\n      return {\n        ...state,\n        isUserLoggedIn: action.loggedIn\n      }\n    default:\n      return state\n  }\n}\n\nexport const showHotspotForm = (newCoordinates) => {\n  return dispatch => {\n    if (newCoordinates.latlng) {\n      newCoordinates = [newCoordinates.latlng.lng, newCoordinates.latlng.lat]\n    }\n    dispatch({\n      type: 'SHOW_HOTSPOT_FORM',\n      newCoordinates\n    })\n  }\n}\n\nexport const hideHotspotForm = () => {\n  return dispatch => {\n    dispatch({\n      type: 'SHOW_MAP'\n    })\n  }\n}\n\nexport const hideHotspot = () => {\n  return dispatch => {\n    dispatch({\n      type: 'SHOW_MAP'\n    })\n  }\n}\n\nexport const showHotspot = (id) => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_HOTSPOT'\n      })\n  }\n}\n\nexport const showLoginForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_LOGINFORM'\n      })\n  }\n}\n\nexport const hideLoginForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_PREVIOUS'\n      })\n  }\n}\n\nexport const showRegisterForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_REGISTERFORM'\n      })\n  }\n}\n\nexport const hideRegisterForm = () => {\n  return dispatch => {\n      dispatch({\n        type: 'SHOW_PREVIOUS'\n      })\n  }\n}\n\nexport const setUserLoggedIn = (loggedIn) => {\n  return dispatch => {\n    dispatch({\n      type: 'SET_USERLOGGEDIN',\n      loggedIn\n    })\n  }\n}\n\nexport default viewReducer","import axios from 'axios'\nconst baseUrl = '/api/hotspots'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getHotspotsByCoordinates = async (lng, lat) => {\n  const response = await axios.get(`${baseUrl}/@${lng},${lat}`)\n  return response.data\n}\n\nconst getHotspot = async (id) => {\n  const response = await axios.get(`${baseUrl}/${id}`)\n  return response.data\n}\n\nconst create = async (hotspot) => {\n  const response = await axios.post(baseUrl, hotspot, { withCredentials: true })\n  return response.data\n}\n\nexport default { getAll, getHotspotsByCoordinates, getHotspot, create }","import axios from 'axios'\nconst baseUrl = '/api/comments'\n\nconst create = async (comment) => {\n  const response = await axios.post(baseUrl, comment, { withCredentials: true })\n  return response.data\n}\n\nexport default { create }","import hotspotService from '../services/hotspotService'\nimport commentService from '../services/commentService'\n\nconst initialState = {\n  hotspots:  [],\n  currentHotspot: null,\n  newHotspot: null,\n  error: null\n}\n\nconst hotspotReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'GET_HOTSPOTS_SUCCESS':\n      return {\n        hotspots: action.hotspots,\n        error: null\n      }\n    case 'GET_HOTSPOTS_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    case 'SET_CURRENT_HOTSPOT':\n      return {\n        ...state,\n        currentHotspot: state.hotspots.find(hs => hs.id === action.id),\n        error: null\n      }\n    case 'ADD_HOTSPOT_SUCCESS':\n      return {\n        ...state,\n        hotspots: state.hotspots.concat(action.hotspot),\n        newHotspot: action.hotspot,\n        error: null\n      }\n    case 'ADD_HOTSPOT_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    case 'ADD_COMMENT_SUCCESS':\n      const hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\n      hotspot.comments = hotspot.comments.concat(action.comment)\n      return {\n        ...state,\n        hotspots: state.hotspots.map(hs =>\n          hs.id === hotspot.id\n          ? hotspot\n          : hs),\n        currentHotspot: hotspot,\n        error: null\n      }\n    case 'ADD_COMMENT_FAIL':\n      return {\n        ...state,\n        error: action.error\n      }\n    default:\n      return state\n  }\n}\n\nexport const initialiseHotspots = () => {\n  return async dispatch => {\n    try {\n      const hotspots = await hotspotService.getAll()\n      console.log('Fetched hotspots: ',hotspots)\n      dispatch({\n        type:'GET_HOTSPOTS_SUCCESS',\n        hotspots\n      })\n    } catch (error) {\n      dispatch({\n        type: 'GET_HOTSPOTS_FAIL',\n        error: 'Virhe kohteiden haussa! ' + error\n      })\n    }\n  }\n}\n\nexport const addHotspot = (hotspot) => {\n  return async dispatch => {\n    try {\n      const newHotspot = await hotspotService.create(hotspot)\n      dispatch({\n        type: 'ADD_HOTSPOT_SUCCESS',\n        hotspot: newHotspot\n      })\n    } catch (error) {\n      dispatch({\n        type: 'ADD_HOTSPOT_FAIL',\n        error: 'Kohdetta ei voitu lisätä! ' + error\n      })\n    }\n  }\n}\n\nexport const setCurrentHotspot = (id) => {\n  return dispatch => {\n    dispatch({\n      type: 'SET_CURRENT_HOTSPOT',\n      id\n    })\n  }\n}\n\nexport const addComment = (comment) => {\n  return async dispatch => {\n    try {\n      const newComment = await commentService.create(comment)\n      dispatch({\n        type: 'ADD_COMMENT_SUCCESS',\n        comment: newComment\n      })\n    } catch (error) {\n      dispatch({\n        type: 'ADD_COMMENT_FAIL',\n        error: 'Kommentia ei voitu lisätä! ' + error\n      })\n    }\n  }\n}\n\nexport default hotspotReducer","// @flow\n\nimport React, { Component } from 'react'\nimport { Map, TileLayer, EsriFeatureLayer,LayersControl, Popup } from './src'\nimport { connect } from 'react-redux'\nimport { showHotspotForm, showHotspot } from '../../reducers/viewReducer'\nimport { setCurrentHotspot } from '../../reducers/hotspotReducer'\n\ntype State = {\n  lat: number,\n  lng: number,\n  zoom: number,\n}\nconst { BaseLayer, Overlay } = LayersControl\n\nclass EsriGtkMap extends Component<{}, State> {\n  state = {\n    lat: 68.7512,\n    lng: 25.6189,\n    zoom: 7,\n  }\n\n  handleMapClick = (coordinates) => {\n    //console.log('esri-feature-layer example this',this)\n    console.log('coordinates2: ', coordinates)\n    if (this.props.isUserLoggedIn) {\n      this.props.showHotspotForm(coordinates)\n    }\n  }\n\n  handleHotspotClick = (e) => {\n    console.log(e.layer.feature.properties.id)\n    this.props.setCurrentHotspot(e.layer.feature.properties.id)\n    this.props.showHotspot()\n  }\n\n  render() {\n    return (\n      <Map\n        center={[this.state.lat, this.state.lng]}\n        zoom={this.state.zoom}\n        handleMapClick={this.handleMapClick}\n        handleHotspotClick={this.handleHotspotClick}\n        hotspots={this.props.hotspots}>\n\n        <LayersControl position=\"topright\">\n          <LayersControl.BaseLayer name=\"Peruskartta\" >\n            <TileLayer\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n              url=\"https://tiles.kartat.kapsi.fi/peruskartta/{z}/{x}/{y}.png\"\n            />\n          </LayersControl.BaseLayer>\n          <LayersControl.BaseLayer name=\"OpenStreetMap\" checked >\n            <TileLayer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n          </LayersControl.BaseLayer>\n          <LayersControl.Overlay\n          name=\"<span class='layers-control-label lightsteelblue'>kaivospiirihakemukset</span>\">\n            <EsriFeatureLayer name=\"kaivospiirihakemukset\"\n              color=\"lightsteelblue\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/0?f=pjson\"\n            />\n          </LayersControl.Overlay>\n\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label steelblue'>kaivospiirit</span>\">\n            <EsriFeatureLayer\n              color=\"steelblue\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/1?f=pjson\"\n            />\n          </LayersControl.Overlay>\n\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label darkblue'>kaivospiirit karenssissa</span>\">\n            <EsriFeatureLayer name=\"kaivospiirit_karenssissa\"\n              color=\"darkblue\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/2?f=pjson\"\n            >\n            </EsriFeatureLayer>\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label burlywood'>kaivoslupahakemukset</span>\">\n            <EsriFeatureLayer name=\"kaivoslupahakemukset\"\n              color=\"burlywood\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/3?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label sandybrown'>kaivosalueet voimassa</span>\">\n            <EsriFeatureLayer name=\"kaivosalueet_voimassa\"\n              color=\"sandybrown\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/4?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label green'>valtaushakemukset</span>\">\n            <EsriFeatureLayer name=\"valtaushakemukset\"\n              color=\"green\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/5?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay\n            name=\"<span class='layers-control-label forestgreen'>valtaukset</span>\">\n            <EsriFeatureLayer name=\"valtaukset\"\n              color=\"forestgreen\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/6?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"valtaukset karenssissa\" >\n            <EsriFeatureLayer name=\"valtaukset_karenssissa\"\n              color=\"darkgreen\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/7?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"malminetsintalupahakemukset\" color=\"lightpink\">\n            <EsriFeatureLayer name=\"malminetsintalupahakemukset\"\n              color=\"chocolate\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/8?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"malminetsintaalueet\" color=\"lightcoral\" >\n            <EsriFeatureLayer name=\"malminetsintaalueet\"\n              color=\"saddlebrown\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/9?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"malminetsintaluvat karenssissa\" >\n            <EsriFeatureLayer name=\"malminetsintaluvat_karenssissa\"\n              color=\"sienna\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/10?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"varausilmoitushakemukset\" >\n            <EsriFeatureLayer name=\"varausilmoitushakemukset\"\n              color=\"darkviolet\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/11?f=pjson\"\n            ></EsriFeatureLayer>\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"varausilmoitukset karenssissa\" >\n            <EsriFeatureLayer name=\"varausilmoitukset_karenssissa\"\n            color=\"deeppink\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/12?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"varausilmoitukset\" >\n            <EsriFeatureLayer name=\"varausilmoitukset\"\n              color=\"firebrick\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/13?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"kullanhuuhdontaluvat\" >\n            <EsriFeatureLayer name=\"kullanhuuhdontaluvat\"\n              color=\"gold\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/14?f=pjson\"\n            />\n          </LayersControl.Overlay>\n          <LayersControl.Overlay name=\"kullanhuuhdontalupahakemukset\" >\n            <EsriFeatureLayer name=\"kullanhuuhdontalupahakemukset\"\n            color=\"darkgoldenrod\"\n              url=\"https://gtkdata.gtk.fi/arcgis/rest/services/Tukes/TukesWMS/MapServer/15?f=pjson\"\n            />\n          </LayersControl.Overlay>\n        </LayersControl>\n      </Map>\n\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    hotspots: state.map.hotspots,\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  showHotspotForm,\n  showHotspot,\n  setCurrentHotspot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EsriGtkMap)\n","import React, { Component } from 'react'\n//import { Embed } from 'semantic-ui-react'\nimport EsriGtkMap from './EsriGtkMap'\nimport './esri-gtk-map.css'\n\nclass MapContainer extends Component {\n  render() {\n    return (\n    <div id =\"MapContainer\">\n      <EsriGtkMap />\n    </div>\n    )\n  }\n}\n\nexport default MapContainer\n","import axios from 'axios'\n\nconst login = async (credentials) => {\n  const response = await axios.post('/login', credentials)\n  return response.data\n}\n\nconst logout = async () => {\n  const response = await axios.post('/logout', { withCredentials: true })\n  return response.data\n}\n\nconst register = async (userInfo) => {\n  const response = await axios.post('/register', userInfo)\n  return response.data\n}\n\nexport default { login, logout, register }","import React from 'react'\nimport { connect } from 'react-redux'\nimport { NavLink, withRouter } from 'react-router-dom'\nimport { Menu, Dropdown, Icon, Container } from 'semantic-ui-react'\nimport { showLoginForm, setUserLoggedIn } from '../reducers/viewReducer'\nimport loginService from '../services/loginService'\n\nclass MenuBar extends React.Component {\n\n  logout = async () => {\n    await loginService.logout()\n    this.props.setUserLoggedIn(false)\n  }\n\n  render() {\n\n    const subMenu = () => {\n      if (this.props.isUserLoggedIn) {\n        return (\n          <Dropdown item icon='bars' direction='left'>\n            <Dropdown.Menu>\n              <Dropdown.Item onClick={ this.logout }>\n                Kirjaudu ulos\n                <Icon style={{ paddingLeft: '5px' }} name='log out' />\n              </Dropdown.Item>\n            </Dropdown.Menu>\n          </Dropdown>\n        )\n      } else {\n        return (\n          <Menu.Item onClick={ this.props.showLoginForm }>\n            <Icon name='sign in' />\n          </Menu.Item>\n        )\n      }\n    }\n\n    return (\n      <Menu attached='top' tabular>\n        <Container>\n          <Menu.Item>Luontovahdit</Menu.Item>\n          <Menu.Menu position='right'>\n            { subMenu() }\n          </Menu.Menu>\n        </Container>\n      </Menu>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  showLoginForm,\n  setUserLoggedIn\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MenuBar))","const initialState = {\n  hotspots:  [\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": \"5c1e0b21ee7a321eb40f3e12\",\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [24.8297076, 60.3190656]\n      }\n    },\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": \"5c1e2ecbc969793cecad491a\",\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [25, 60.2]\n      }\n    }\n  ]\n}\n\nconst mapReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SET_HOTSPOTS':\n      return {\n        hotspots: action.hotspots\n      }\n    case 'ADD_HOTSPOT':\n      return {\n        hotspots: state.hotspots.concat(action.hotspot)\n      }\n    default:\n      return state\n  }\n}\n\nexport const setHotspotsOnMap = (hotspots) => {\n  return dispatch => {\n    const hotspotFeatures = hotspots.map(hs => {\n      return {\n        'type': 'Feature',\n        'properties': {\n          'id': hs.id,\n          'icon': 'star'\n        },\n        'geometry': {\n          'type': 'Point',\n          'coordinates': hs.location.coordinates\n        }\n      }\n    })\n    console.log(hotspotFeatures)\n    dispatch({\n      type: 'SET_HOTSPOTS',\n      hotspots: hotspotFeatures\n    })\n  }\n}\n\nexport const addHotspot = (hotspot) => {\n  return dispatch => {\n    let newHotspot = {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": hotspot.id,\n        \"icon\": \"star\"\n      },\n      \"geometry\": {\n        'type': 'Point',\n        'coordinates': hotspot.location.coordinates\n      }\n    }\n    console.log(newHotspot)\n    console.log(hotspot.location)\n    dispatch({\n      type: 'ADD_HOTSPOT',\n      hotspot: newHotspot\n    })\n  }\n}\n\nexport default mapReducer","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Form, TextArea } from 'semantic-ui-react'\nimport { hideHotspotForm } from '../reducers/viewReducer'\nimport { addHotspot } from '../reducers/hotspotReducer'\nimport { addHotspot as addHotspotToMap } from '../reducers/mapReducer'\nimport { views } from '../constants'\n\nclass HotspotForm extends Component {\n\n  close = () => this.props.hideHotspotForm()\n\n  addHotspot = async (event) => {\n    event.preventDefault()\n\n    if (event.target.title.value.length > 0 &&\n        event.target.description.value.length > 0) {\n\n      const hotspotObject = {\n        title: event.target.title.value,\n        description: event.target.description.value,\n        location: {\n          type: 'Point',\n          coordinates: this.props.coordinates\n        }\n      }\n\n      console.log('coordinates: ', this.props.coordinates)\n      console.log('new hs?: ', hotspotObject)\n      event.target.title.value = ''\n      event.target.description.value = ''\n\n      await this.props.addHotspot(hotspotObject)\n\n      if (this.props.error) {\n        console.log('Error adding hotspot...')\n        console.log(this.props.error)\n      } else {\n        console.log('Added hotspot!')\n        console.log(this.props.newHotspot)\n        this.props.addHotspotToMap(this.props.newHotspot)\n        this.props.hideHotspotForm()\n      }\n    }\n  }\n\n  render() {\n    console.log('open ' + this.props.open)\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Lisää kohde</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.addHotspot }>\n              <div>\n                Kohteen nimi:\n                <Form.Input\n                  type=\"text\"\n                  name=\"title\"\n                />\n              </div>\n              <div>\n                Havainto:\n                <TextArea\n                  name=\"description\"\n                  style={{ minHeight: 100 }} />\n              </div>\n              <Button type=\"submit\">\n                Lisää\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.HOTSPOTFORM,\n    coordinates: state.view.newCoordinates,\n    newHotspot: state.hotspot.newHotspot,\n    error: state.hotspot.error\n  }\n}\n\nconst mapDispatchToProps = {\n  hideHotspotForm,\n  addHotspot,\n  addHotspotToMap\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HotspotForm)","import React from 'react'\nimport { Segment, Label, Button, Icon, Header, Divider } from 'semantic-ui-react'\nimport { dateFormat } from '../constants'\n\nclass Comments extends React.Component {\n\n  render() {\n    console.log(this.props)\n    return (\n      <div>\n        { this.props.comments.map(comment =>\n          <div key={ comment.id }>\n            <Segment>\n              { new Date(comment.createdAt).toLocaleDateString('fi-FI', dateFormat) } lisännyt { comment.addedBy.name }\n              <Divider hidden />\n              <p>{ comment.content }</p>\n              <Divider hidden />\n              <Button as='div' labelPosition='right'>\n                <Button compact basic color='green'>\n                  <Icon name='thumbs up' />\n                </Button>\n                <Label basic pointing='left'>\n                  { comment.upVotes }\n                </Label>\n              </Button>\n              <Button as='div' labelPosition='right'>\n                <Button compact basic color='orange'>\n                  <Icon name='thumbs down' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { comment.downVotes }\n                </Label>\n              </Button>\n              <Button compact basic color='red'>\n                  <Icon name='flag' />\n              </Button>\n            </Segment>\n            <Divider hidden />\n          </div>\n        ) }\n      </div>\n    )\n  }\n}\n\nexport default Comments","import React from 'react'\nimport { Segment, Button, Divider } from 'semantic-ui-react'\n\nclass Togglable extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      visible: false\n    }\n  }\n\n  toggleVisibility = () => {\n    this.setState({ visible: !this.state.visible })\n  }\n\n  render() {\n    const hideWhenVisible = { display: this.state.visible ? 'none' : '' }\n    const showWhenVisible = { display: this.state.visible ? '' : 'none' }\n\n    return (\n      <Segment>\n        <div style={hideWhenVisible}>\n          <Button onClick={this.toggleVisibility}>{this.props.buttonLabel}</Button>\n        </div>\n        <div style={showWhenVisible}>\n          <Button basic onClick={this.toggleVisibility}>Peruuta</Button>\n          <Divider hidden />\n          {this.props.children}\n        </div>\n      </Segment>\n    )\n  }\n}\n\nexport default Togglable","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Form, TextArea } from 'semantic-ui-react'\nimport { addComment } from '../reducers/hotspotReducer'\n\nclass CommentForm extends Component {\n\n  addComment = async (event) => {\n    event.preventDefault()\n\n    if (event.target.comment.value.length > 0) {\n\n      const commentObject = {\n        content: event.target.comment.value,\n        inHotspot: this.props.hotspotId\n      }\n\n      event.target.comment.value = ''\n\n      await this.props.addComment(commentObject)\n\n      if (this.props.error) {\n        console.log('Error adding comment...')\n        console.log(this.props.error)\n      } else {\n        console.log('Added hotspot!')\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Form onSubmit={ this.addComment }>\n      <div>\n        <TextArea\n          name=\"comment\"\n          style={{ minHeight: 100 }} />\n      </div>\n      <Button type=\"submit\">\n        Lisää\n      </Button>\n    </Form>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    error: state.hotspot.error\n  }\n}\n\nconst mapDispatchToProps = {\n  addComment\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentForm)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Icon, Label, Divider, Segment } from 'semantic-ui-react'\nimport { hideHotspot } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport Comments from './Comments'\nimport Togglable from './Togglable'\nimport CommentForm from './CommentForm'\n\nclass Hotspot extends Component {\n\n  close = () => this.props.hideHotspot()\n\n  render() {\n\n    if (this.props.hotspot) {\n      const hs = this.props.hotspot\n\n      const showCommentButton = () => {\n        if (this.props.isUserLoggedIn) {\n          return (\n            <Togglable buttonLabel=\"Kommentoi\">\n              <CommentForm hotspotId={ hs.id } />\n            </Togglable>\n          )\n        } else {\n          return null\n        }\n      }\n\n      return (\n        <div>\n          <Modal\n            open={ this.props.open }\n            closeOnDimmerClick={ false }\n            onClose={ this.close }\n            closeIcon\n          >\n            <Modal.Header>{ hs.title }</Modal.Header>\n            <Modal.Content>\n              <Button as='div' labelPosition='right'>\n                <Button basic color='green'>\n                  <Icon name='thumbs up' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { hs.upVotes }\n                </Label>\n              </Button>\n              <Button as='div' labelPosition='right'>\n                <Button basic color='orange'>\n                  <Icon name='thumbs down' />\n                </Button>\n                <Label as='a' basic pointing='left'>\n                  { hs.downVotes }\n                </Label>\n              </Button>\n              <Button basic color='red'>\n                  <Icon name='flag' />\n              </Button>\n              lisännyt { hs.addedBy.name }\n              <Divider hidden />\n              { hs.description }\n              <Divider hidden />\n              { showCommentButton() }\n              <Comments comments={ hs.comments } />\n            </Modal.Content>\n          </Modal>\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <Modal\n            open={this.props.open}\n            closeOnDimmerClick={false}\n            onClose={this.close}\n            closeIcon\n          >\n            <Modal.Header>Kohdetta ei löytynyt!</Modal.Header>\n            <Modal.Content>\n              <p>Jotain meni pieleen.</p>\n            </Modal.Content>\n          </Modal>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.HOTSPOT,\n    hotspot: state.hotspot.currentHotspot,\n    isUserLoggedIn: state.view.isUserLoggedIn\n  }\n}\n\nconst mapDispatchToProps = {\n  hideHotspot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Hotspot)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { Button, Modal, Form, Icon } from 'semantic-ui-react'\nimport { hideLoginForm, setUserLoggedIn, showRegisterForm } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport loginService from '../services/loginService'\n\nclass LoginForm extends Component {\n\n  open = () => {\n    this.props.history.push('/login')\n  }\n\n  close = () => {\n    this.props.hideLoginForm()\n    this.props.history.push('/')\n  }\n\n  login = async (event) => {\n    event.preventDefault()\n\n    if (event.target.username.value.length > 0 &&\n        event.target.password.value.length > 0) {\n      try {\n        await loginService.login({\n          username: event.target.username.value,\n          password: event.target.password.value\n        })\n        this.props.setUserLoggedIn(true)\n        this.props.hideLoginForm()\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n\n  render() {\n\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onOpen={this.open}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Tervetuloa!</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.login }>\n              <div>\n                Käyttäjätunnus:\n                <Form.Input\n                  type=\"text\"\n                  name=\"username\"\n                />\n              </div>\n              <div>\n                Salasana:\n                <Form.Input\n                  type=\"password\"\n                  name=\"password\"\n                />\n              </div>\n              <Button type=\"submit\" icon labelPosition='right'>\n                Kirjaudu sisään\n                <Icon name='sign in' />\n              </Button>\n              <Button type=\"button\" onClick={ this.props.showRegisterForm }>\n                Rekisteröidy?\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.LOGINFORM\n  }\n}\n\nconst mapDispatchToProps = {\n  hideLoginForm,\n  setUserLoggedIn,\n  showRegisterForm\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoginForm))","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, Form } from 'semantic-ui-react'\nimport { hideRegisterForm } from '../reducers/viewReducer'\nimport { views } from '../constants'\nimport loginService from '../services/loginService'\n\nclass RegisterForm extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      username: '',\n      password: '',\n      passwordConf: '',\n      displayname: '',\n      email: '',\n      usernameError: false,\n      passwordError: false,\n      displaynameError: false,\n      emailError: false\n    }\n  }\n\n  close = () => this.props.hideRegisterForm()\n\n  register = async (event) => {\n    event.preventDefault()\n\n    this.setState({\n      usernameError: false,\n      passwordError: false,\n      displaynameError: false,\n      emailError: false\n    })\n\n    if (this.state.username.length < 6) {\n      await this.setState({ usernameError: true })\n    }\n    if (this.state.password.length < 8 ||\n        this.state.password !== this.state.passwordConf) {\n      await this.setState({ passwordError: true })\n    }\n    if (this.state.displayname.length < 6) {\n      await this.setState({ displaynameError: true })\n    }\n    if (this.state.email.length < 6) {\n      await this.setState({ emailError: true })\n    }\n\n    if (this.state.usernameError ||\n        this.state.passwordError ||\n        this.state.displaynameError ||\n        this.state.emailError) {\n\n      return\n\n    } else {\n      const userObject = {\n        username: this.state.username,\n        password: this.state.password,\n        displayname: this.state.displayname,\n        email: this.state.email\n      }\n\n      try {\n        await loginService.register(userObject)\n        this.props.hideRegisterForm()\n\n      } catch (error) {\n        console.log('Virhe rekisteröinnissä...')\n        console.log(error)\n      }\n    }\n  }\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value })\n  }\n\n  render() {\n    console.log('open ' + this.props.open)\n    return (\n      <div>\n        <Modal\n          open={this.props.open}\n          closeOnDimmerClick={false}\n          onClose={this.close}\n          closeIcon\n        >\n          <Modal.Header>Rekisteröidy käyttäjäksi</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={ this.register }>\n              <div>\n                Käyttäjätunnus:\n                <Form.Input\n                  type=\"text\"\n                  name=\"username\"\n                  error={ this.state.usernameError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Salasana:\n                <Form.Input\n                  type=\"password\"\n                  name=\"password\"\n                  error={ this.state.passwordError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Salasana uudelleen:\n                <Form.Input\n                  type=\"password\"\n                  name=\"passwordConf\"\n                  error={ this.state.passwordError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Nimimerkki:\n                <Form.Input\n                  type=\"text\"\n                  name=\"displayname\"\n                  error={ this.state.displaynameError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <div>\n                Sähköpostiosoite:\n                <Form.Input\n                  type=\"text\"\n                  name=\"email\"\n                  error={ this.state.emailError }\n                  onChange={ this.handleChange }\n                />\n              </div>\n              <Button type=\"submit\">\n                Rekisteröidy\n              </Button>\n            </Form>\n          </Modal.Content>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    open: state.view.showing === views.REGISTERFORM\n  }\n}\n\nconst mapDispatchToProps = {\n  hideRegisterForm\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Route } from 'react-router-dom'\n//import Map from './components/Map'\nimport Map from './components/map/MapContainer'\nimport MenuBar from './components/MenuBar'\nimport HotspotForm from './components/HotspotForm'\nimport Hotspot from './components/Hotspot'\nimport LoginForm from './components/LoginForm'\nimport RegisterForm from './components/RegisterForm'\nimport { initialiseHotspots } from './reducers/hotspotReducer'\nimport { setHotspotsOnMap } from './reducers/mapReducer'\nrequire('leaflet/dist/leaflet.css');\n\nclass App extends React.Component {\n\n  async componentDidMount() {\n    console.log('Hello')\n    await this.props.initialiseHotspots()\n    if (this.props.hotspots) {\n      console.log(this.props.hotspots)\n      this.props.setHotspotsOnMap(this.props.hotspots)\n    }\n  }\n\n  render() {\n     return (\n      <div>\n        <div>\n          <MenuBar />\n        </div>\n        <div>\n          <Map />\n        </div>\n        <HotspotForm />\n        <Hotspot />\n        <LoginForm />\n        <RegisterForm />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    hotspots: state.hotspot.hotspots\n  }\n}\n\nconst mapDispatchToProps = {\n  initialiseHotspots,\n  setHotspotsOnMap\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport mapReducer from './reducers/mapReducer'\nimport viewReducer from './reducers/viewReducer'\nimport hotspotReducer from './reducers/hotspotReducer'\n//import userReducer from './reducers/userReducer'\n\nconst reducer = combineReducers({\n  map: mapReducer,\n  view: viewReducer,\n  hotspot: hotspotReducer\n})\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools(\n    applyMiddleware(thunk)\n  )\n)\n\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)"],"sourceRoot":""}